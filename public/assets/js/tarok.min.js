async function addScore(e){let t="Kaj je oseba "+e+" igrala?";"Z"==listOfPlayers[e][1]?t="Kaj je "+e+" igrala?":"M"==listOfPlayers[e][1]&&(t="Kaj je "+e+" igral?");var a=makeBottomheet(t);let n=0;for(const t in games){3!=n&&7!=n&&11!=n||(addElement("md-divider",a,null).style.margin="5px"),n++;let i=document.createElement("md-outlined-button");i.innerHTML=t,i.style.height="45px",i.classList.add("gameChose"),i.setAttribute("type","reset");var l=addElement("span",null,"btnIcon");l.setAttribute("slot","icon"),l.innerHTML=games[t][4],i.addEventListener("click",function(){document.querySelector(".sheetContents").style.display="flex",document.querySelector(".sheetContents").style.overflow="hidden","Mondfang"==t?(document.querySelector(".bottomSheetScrim").click(),mondfang(e)):"Renons"==t?renons(a,e):"Klop"==t?klop(a):"Po meri"==t?poMeri(a,e):"Uredi radlce"==t?radlciDodaj(a):calculate(t,games[t],a,e)}),a.appendChild(i)}}function radlciDodajSamo(){for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(listOfPlayers[e][0]+="*")}function radlciDodaj(e){function t(){for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;let t=addElement("label",a,null),n=addElement("md-outlined-text-field",t,"radlciPLayer");n.name=e,n.setAttribute("min","0"),n.setAttribute("type","text"),n.value=listOfPlayers[e][0],zaokrožuj&&n.setAttribute("step","5"),n.setAttribute("pattern","[\\*]"),n.label="Radlci osebe "+e,addElement("div",a,"break")}}changeOpis(e,"Uredi radlce"),e.innerHTML="";var a=addElement("div",e,null);t(),addElement("div",e,"break");let n=addElement("md-text-button",e,null);n.innerHTML="Dodaj radlce",n.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers));for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(listOfPlayers[e][0]+="*");a.innerHTML="",t()});let l=addElement("md-filled-button",e,null);l.innerHTML="Končano",l.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers));for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;let t=document.getElementsByName(e)[0].value;listOfPlayers[e][0]=t.replace(/[^*]/g,"")}document.querySelector(".bottomSheetScrim").click(),count(!1)})}function poMeri(e,t){e.innerHTML="",changeOpis(e,"Vpišite točke");var a=addElement("md-filled-text-field",e,null);addElement("div",e,"break"),a.classList.add("poMeri"),a.type="number",a.innerHTML=t,a.name=0,a.label=t,a.id="meri_"+t,a.addEventListener("change",function(){a.name=a.value}),setTimeout(()=>{a.shadowRoot.querySelector(".field").setAttribute("focused",""),a.focus()},10);var n=addElement("md-filled-button",e,null);n.innerHTML="Končano",n.setAttribute("type","reset"),n.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Po Meri",t,null,a.value,!1,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),count(!1,!0)})}async function klop(e){e.innerHTML="",changeOpis(e,"Ali je bil kdo poln oz. prazen?");var t=addElement("md-outlined-button",e,null);t.innerHTML="Poln";var a=addElement("md-outlined-button",e,null);a.innerHTML="Prazen";var n=addElement("md-filled-button",e,null);n.innerHTML="Ne",t.setAttribute("type","reset"),a.setAttribute("type","reset"),n.setAttribute("type","reset"),n.style.flexBasis="100%",a.addEventListener("click",function(){e.innerHTML="",changeOpis(e,"Kdo je bil poln?");for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;let a=addElement("md-outlined-button",e,null);a.innerHTML=t,a.setAttribute("type","reset"),a.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Klop",a.innerHTML,null,70,listOfPlayers[a.innerHTML][0].length>0,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)})}}),t.addEventListener("click",function(){e.innerHTML="",changeOpis(e,"Kdo je bil prazen?");for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;let a=addElement("md-outlined-button",e,null);a.innerHTML=t,a.setAttribute("type","reset"),a.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Klop",a.innerHTML,null,-70,listOfPlayers[a.innerHTML][0].length>0,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)})}}),await waitForButtonClick([n]),e.innerHTML="";var l=[];for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;let a=addElement("label",e,null);a.innerHTML=t;let n=addElement("md-slider",a,"klopPlayer");n.setAttribute("max","35"),n.setAttribute("min","0"),n.setAttribute("labeled",""),zaokrožuj&&n.setAttribute("step","5"),n.setAttribute("ticks",""),n.label="Točke osebe "+t,l.push(t),addElement("div",e,"break")}addElement("div",e,"break");var i=addElement("md-filled-button",e,null);i.innerHTML="Končano",addElement("div",e,"break"),i.addEventListener("click",function(){let e=!0;var t=document.querySelectorAll(".klopPlayer"),a=[];for(const e of t)listOfPlayers[e.label.replace("Točke osebe ","")][0].length>0?a.push("-"+2*e.value):a.push("-"+e.value);listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Klop",l,null,a,null,null,null,null,!1,!1,!1,Date.now()]),radlciDodajSamo(),e&&(document.querySelector(".bottomSheetScrim").click(),count(!1,!0))})}async function mondfang(e){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Mondfang",e,null,-21,!1,null,!0,null,0,!1,!1,Date.now()]),gameAnimation(),count(!1,!0)}async function renons(e,t){e.innerHTML="",changeOpis(e,"Koliko znaša renons?");let a=addElement("md-slider",e,"klopPlayer");a.setAttribute("max","50"),a.setAttribute("min","0"),a.setAttribute("labeled",""),zaokrožuj&&a.setAttribute("step","5"),a.setAttribute("ticks",""),addElement("div",e,"break");let n=addElement("md-filled-button",e,null);n.innerHTML="Končano",n.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Renons",t,null,-Math.abs(parseInt(a.value)),!1,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),count(!1,!0)})}async function calculate(e,t,a,n){if(a.innerHTML="",5==Object.keys(listOfPlayers).length)partner(a,e,t,!1,n);else{var l=addElement("md-filled-button",null,null),i=t[3];let r="Je oseba <b>"+n+"</b> igrala solo ali s partnerjem?";"Z"==listOfPlayers[n][1]?r="Je <b>"+n+"</b> igrala sama ali s partnerjem?":"M"==listOfPlayers[n][1]&&(r="Je <b>"+n+"</b> igral sam ali s partnerjem?"),changeOpis(a,r),l.setAttribute("type","reset");var o=[];if(l.addEventListener("click",function(){this.remove();for(let e=0;e<o.length;e++)o[e].remove();partner(a,e,t,!1,n)}),i){for(const i in listOfPlayers){if("!gamesData!"==i||"!gameName!"==i)continue;if(i==n)continue;let r=addElement("md-outlined-button",a,null);r.innerHTML=i,o.push(r),r.setAttribute("type","reset"),r.addEventListener("click",function(){l.remove();for(let e=0;e<o.length;e++)o[e].remove();partner(a,e,t,!0,n,i)})}l.innerHTML="Solo",l.style.flexBasis="100%",a.appendChild(l)}else partner(a,e,t,!1,n)}}function waitForButtonClick(e){return new Promise(t=>{for(const a in e)e[a].addEventListener("click",function(){t()})})}async function partner(e,t,a,n,l,i){var o="";n&&i&&(o=i),changeOpis(e,"Izberite razliko");var r=document.createElement("md-slider"),s=0;if(zaokrožuj){if(a[1]){var d=[0,5,10,15,20,25,30,35],c=[];addElement("div",e,"break");for(const t in d){let a=addElement("md-outlined-button",e,null);a.innerHTML=d[t],c.push(a),a.setAttribute("type","reset"),a.addEventListener("click",function(){r.value=a.innerHTML,s=a.innerHTML,a.remove(),e.innerHTML=""})}await waitForButtonClick(c)}}else if(r.setAttribute("labeled",""),a[1]){r.min=0,r.value=0,r.label="Razlika",r.max=35,r.style.marginTop="10px",e.appendChild(r),addElement("div",e,"break");let t=addElement("md-filled-button",e,null);t.innerHTML="Končano",t.setAttribute("type","reset"),r.addEventListener("change",function(){s=r.value}),await waitForButtonClick([t]),e.innerHTML=""}var m=addElement("md-filled-button",null,null),u=addElement("md-filled-tonal-button",null,null);m.style.height=u.style.height="50px",m.style.flexBasis=u.style.flexBasis="100%",addElement("div",e,"break"),addElement("div",e,"break"),m.innerHTML="Zmaga",u.innerHTML="Poraz",addElement("div",e,"break");var g={Trula:[10,20,null,null,!1],Kralji:[10,20,null,null,!1],"Pagat ultimo":[25,50,null,null,!1],"Kralj ultimo":[10,20,null,null,!1]},p=0;if(n)if(a[1]){let a="Osebi "+l+" in "+o+" sta igrali igro "+t.toLowerCase()+" z razliko "+s+".";"Z"==listOfPlayers[l][1]&&"Z"==listOfPlayers[o][1]?a=l+" in "+o+" sta igrali igro "+t.toLowerCase()+" z razliko "+s+".":"N"!==listOfPlayers[l][1]&&"N"!==listOfPlayers[o][1]&&(a=l+" in "+o+" sta igrala igro "+t.toLowerCase()+" z razliko "+s+"."),changeOpis(e,a)}else{let a="Osebi "+l+" in "+o+" sta igrali igro "+t.toLowerCase()+".";"Z"==listOfPlayers[l][1]&&"Z"==listOfPlayers[o][1]?a=l+" in "+o+" sta igrali igro "+t.toLowerCase()+".":"N"!==listOfPlayers[l][1]&&"N"!==listOfPlayers[o][1]&&(a=l+" in "+o+" sta igrala igro "+t.toLowerCase()+"."),changeOpis(e,a)}else if(o="partnerigralcakimuniimenic",a[1]){let a="Oseba "+l+" je igrala igro "+t.toLowerCase()+", z razliko "+s+".";"Z"==listOfPlayers[l][1]?a=l+" je igrala igro "+t.toLowerCase()+", z razliko "+s+".":"M"==listOfPlayers[l][1]&&(a=l+" je igral igro "+t.toLowerCase()+", z razliko "+s+"."),changeOpis(e,a)}else{o="partnerigralcakimuniimenic";let a="Oseba "+l+" je igrala igro "+t.toLowerCase()+".";"Z"==listOfPlayers[l][1]?a=l+" je igrala igro "+t.toLowerCase()+".":"M"==listOfPlayers[l][1]&&(a=l+" je igral igro "+t.toLowerCase()+"."),changeOpis(e,a)}if(a[1])for(const t in g){let a=document.createElement("md-outlined-button");a.innerHTML=t,a.style.transition=" all .2s",a.style.height="45px",a.addEventListener("click",function(){var n=$(e).children().detach();let l=e.parentNode.parentNode.querySelector(".bottomSheetTitle").innerText;e.innerHTML="";var i=e;changeOpis(e,"Izberite "),$(".iksRight").hide();var o=!0,r=!0;let s=addElement("md-outlined-segmented-button-set",i,null),d=addElement("md-outlined-segmented-button",s,null);d.setAttribute("type","reset");let c=addElement("md-outlined-segmented-button-set",i,null),m=addElement("md-outlined-segmented-button",c,null);m.label="Izgubljeno",m.addEventListener("click",function(){r=!1});let u=addElement("md-outlined-segmented-button",c,null);u.label="Dobljeno",u.addEventListener("click",function(){r=!0});let p=addElement("md-outlined-segmented-button",s,null);g[t][3]&&(p.selected=!0),0==g[t][3]&&(d.selected=!0),addElement("div",i,"break").style.height="10px";let f=addElement("md-text-button",i,null);f.innerHTML="Odstrani bonus",f.setAttribute("type","reset"),a.innerHTML=t,f.addEventListener("click",function(){g[t][2]=null,g[t][3]=null,g[t][4]=!1,a.innerHTML=t,$(".iksRight").show(),$(e).empty().append(n),changeOpis(e,l)});let y=addElement("md-filled-tonal-button",i,null);y.innerHTML="Končano",y.setAttribute("type","reset"),p.label="Napovedano",p.setAttribute("type","reset"),d.addEventListener("click",function(){o=!1}),p.addEventListener("click",function(){o=!0}),d.label="Tiho",addElement("div",i,"break").style.height="20px",g[t][2]&&(u.selected=!0),0==g[t][2]&&(m.selected=!0),y.addEventListener("click",function(){o?(g[t][3]=!0,a.innerHTML+='<md-icon slot="icon">checkbox</md-icon>'):(g[t][3]=!1,a.innerHTML+='<md-icon slot="icon">close</md-icon>'),r?(g[t][2]=!0,a.innerHTML+='<md-icon slot="icon">checkbox</md-icon>'):(g[t][2]=!1,a.innerHTML+='<md-icon slot="icon">close</md-icon>'),$(".iksRight").show(),$(e).empty().append(n),changeOpis(e,l)})}),e.appendChild(a)}addElement("md-divider",e,null).style.margin="5px";let f=addElement("md-outlined-button",e,null);f.innerHTML="Kontra";let y=addElement("md-outlined-button",e,null);y.innerHTML="Rekontra";var v=!1,h=!1,b=!1,k=!1,P=!1,E=!1,L=!1,O=!1,S=!1,T=!1;y.addEventListener("click",function(){var a=$(e).children().detach();let n=e.parentNode.parentNode.querySelector(".bottomSheetTitle").innerText;e.innerHTML="",!0;var l=e;changeOpis(e,"Izberite"),$(".iksRight").hide();var i=addElement("md-outlined-segmented-button-set",l,null);i.setAttribute("multiselect","");let o=addElement("md-outlined-segmented-button",i,null);o.label+="Igra "+t.toLowerCase(),o.addEventListener("click",function(){E=!!o.selected}),addElement("div",l,"break").style.height="20px";let r=addElement("md-text-button",l,null);if(r.innerHTML="Končano",r.addEventListener("click",function(t){$(".iksRight").show(),$(e).empty().append(a),changeOpis(e,n)}),g.Kralji[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralji",e.addEventListener("click",function(){L=!!e.selected})}if(g.Trula[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Trula",e.addEventListener("click",function(){O=!!e.selected})}if(g["Kralj ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralj ultimo",e.addEventListener("click",function(){S=!!e.selected})}if(g["Pagat ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Pagat ultimo",e.addEventListener("click",function(){T=!!e.selected})}}),f.addEventListener("click",function(){var a=$(e).children().detach();let n=e.parentNode.parentNode.querySelector(".bottomSheetTitle").innerText;e.innerHTML="";var l=e;changeOpis(e,"Izberite"),$(".iksRight").hide();var i=addElement("md-outlined-segmented-button-set",l,null);i.setAttribute("multiselect","");let o=addElement("md-outlined-segmented-button",i,null);o.label+="Igra "+t.toLowerCase(),o.addEventListener("click",function(){v=!!o.selected}),addElement("div",l,"break").style.height="20px";let r=addElement("md-text-button",l,null);if(r.innerHTML="Končano",r.addEventListener("click",function(t){$(".iksRight").show(),$(e).empty().append(a),changeOpis(e,n)}),g.Kralji[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralji",e.addEventListener("click",function(){h=!!e.selected})}if(g.Trula[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Trula",e.addEventListener("click",function(){b=!!e.selected})}if(g["Kralj ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralj ultimo",e.addEventListener("click",function(){k=!!e.selected})}if(g["Pagat ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Pagat ultimo",e.addEventListener("click",function(){P=!!e.selected})}}),addElement("md-divider",e,null).style.margin="5px",e.appendChild(u),e.appendChild(m),s=Math.abs(s),m.addEventListener("click",function(){let e={};h&&(g.Kralji[1]*=2),b&&(g.Trula[1]*=2),k&&(g["Kralj ultimo"][1]*=2),P&&(g["Pagat ultimo"][1]*=2),L&&(g.Kralji[1]*=4),O&&(g.Trula[1]*=4),S&&(g["Kralj ultimo"][1]*=4),T&&(g["Pagat ultimo"][1]*=4);let i={Kralji:h,Trula:b,"Pagat ultimo":P,"Kralj ultimo":k,Kralji2:L,Trula2:O,"Pagat ultimo2":T,"Kralj ultimo2":S};for(const t in g)null!==g[t][2]&&(!1!==g[t][2]?1==g[t][3]?(e[t]=[g[t][1],!0,!0,i[t],i[t+"2"]],p+=g[t][1]):(e[t]=[g[t][0],!1,!0,i[t],i[t+"2"]],p+=g[t][0]):1==g[t][3]?(e[t]=[-Math.abs(g[t][1]),!0,!1],i[t],i[t+"2"],p-=g[t][1]):(e[t]=[-Math.abs(g[t][0]),!1,!1,i[t],i[t+"2"]],p-=g[t][0]));listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),0===Object.keys(e).length&&(e=null),(""!==o||n)&&(a[1]?n?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,parseInt(a[0])+parseInt(s)+p,listOfPlayers[l][0].length>0,parseInt(s),!0,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,parseInt(a[0])+parseInt(s)+p,listOfPlayers[l][0].length>0,parseInt(s),!0,e,p,!1,!1,Date.now()]):n?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,parseInt(a[0]+p),listOfPlayers[l][0].length>0,null,!0,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,parseInt(a[0]+p),listOfPlayers[l][0].length>0,null,!0,e,p,!1,!1,Date.now()])),listOfPlayers["!gamesData!"].slice(-1)[0][3]>0&&listOfPlayers[l][0].length>0&&(listOfPlayers[l][0]=listOfPlayers[l][0].replace("*","")),v&&(listOfPlayers["!gamesData!"].at(-1)[9]=!0),E&&(listOfPlayers["!gamesData!"].at(-1)[10]=!0),document.querySelector(".bottomSheetScrim").click(),(t.includes("Valat")||t.includes("Berač"))&&radlciDodajSamo(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)}),u.addEventListener("click",function(){let e={};h&&(g.Kralji[1]*=2),b&&(g.Trula[1]*=2),k&&(g["Kralj ultimo"][1]*=2),P&&(g["Pagat ultimo"][1]*=2),L&&(g.Kralji[1]*=4),O&&(g.Trula[1]*=4),S&&(g["Kralj ultimo"][1]*=4),T&&(g["Pagat ultimo"][1]*=4);let i={Kralji:h,Trula:b,"Pagat ultimo":P,"Kralj ultimo":k,Kralji2:L,Trula2:O,"Pagat ultimo2":T,"Kralj ultimo2":S};for(const t in g)null!==g[t][2]&&(!1!==g[t][2]?1==g[t][3]?(e[t]=[g[t][1],!0,!0,i[t],i[t+"2"]],p+=g[t][1]):(e[t]=[g[t][0],!1,!0,i[t],i[t+"2"]],p+=g[t][0]):1==g[t][3]?(e[t]=[-Math.abs(g[t][1]),!0,!1],i[t],i[t+"2"],p-=g[t][1]):(e[t]=[-Math.abs(g[t][0]),!1,!1,i[t],i[t+"2"]],p-=g[t][0]));listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),0===Object.keys(e).length&&(e=null),a[1]?n?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,-Math.abs(parseInt(a[0])+parseInt(s))+p,listOfPlayers[l][0].length>0,parseInt(s),!1,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,-Math.abs(parseInt(a[0])+parseInt(s))+p,listOfPlayers[l][0].length>0,parseInt(s),!1,e,p,!1,!1,Date.now()]):n?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,-Math.abs(parseInt(a[0]))+p,listOfPlayers[l][0].length>0,null,!1,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,-Math.abs(parseInt(a[0]))+p,listOfPlayers[l][0].length>0,null,!1,e,p,!1,!1,Date.now()]),listOfPlayers["!gamesData!"].slice(-1)[0][3]>0&&listOfPlayers[l][0].length>0&&(listOfPlayers[l][0]=listOfPlayers[l][0].replace("*","")),v&&(listOfPlayers["!gamesData!"].at(-1)[9]=!0),E&&(listOfPlayers["!gamesData!"].at(-1)[10]=!0),document.querySelector(".bottomSheetScrim").click(),(t.includes("Valat")||t.includes("Berač"))&&radlciDodajSamo(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)})}function gameAnimation(){let e=listOfPlayers["!gamesData!"].at(-1)[3];listOfPlayers["!gamesData!"].at(-1)[9]&&(e=2*(games[listOfPlayers["!gamesData!"].at(-1)[0]][0]+listOfPlayers["!gamesData!"].at(-1)[5])+listOfPlayers["!gamesData!"].at(-1)[8]),listOfPlayers["!gamesData!"].at(-1)[10]&&(e=4*(games[listOfPlayers["!gamesData!"].at(-1)[0]][0]+listOfPlayers["!gamesData!"].at(-1)[5])+listOfPlayers["!gamesData!"].at(-1)[8]),listOfPlayers["!gamesData!"].at(-1)[4]&&(e*=2);let t=addElement("div",document.body,"bottomSheetScrim"),a=addElement("div",document.body,"bottomSheetScrim");a.classList.add("scoreAnimHolder");let n=addElement("div",a,"scoreAnimation"),l=addElement("span",a,"scoreTxt");n.style.width=((e>0?"+":"")+e).length+"ch",setTimeout(()=>{t.style.opacity=".5",n.style.scale="1",l.style.fontSize="4rem"},200),l.innerHTML=(e>0?"+":"")+e,setTimeout(()=>{setTimeout(()=>{l.style.maxWidth=((e>0?"+":"")+e).length+"ch"},200);const t=e>0?["😂","🤣","😁","😀","😎","😆","😅","😃"]:["😒","😥","😣","😫","😖","🤬","😭","😧"];for(let e=0;e<20;e++){let n=addElement("span",a,"emoji");n.innerHTML=t[Math.floor(Math.random()*t.length)],n.style.animationDelay=`.${e}s`,n.style.left=5*e+"vw",n.style.fontSize=getRandomNumber(1,2)+"rem",n.style.setProperty("--initial-bottom",getRandomNumber(-10,-47)+"vh")}},600),setTimeout(()=>{n.style.scale="0",l.style.fontSize="0rem",l.style.transition="all .4s",t.style.opacity="0",setTimeout(()=>{a.remove(),t.remove()},1e3)},3e3)}function getRandomNumber(e,t,a=!1){return a?Math.random()*(t-e+1)+e:Math.floor(Math.random()*(t-e+1))+e}function download(){JSON.stringify(listOfPlayers);var e="https://stevec-taroka.si/"+encodeURIComponent("users/"+sessionStorage.uid+"/games/"+listOfPlayers["!gameName!"]);console.log(e);try{navigator.userAgent.includes("wv")?Android.share(e):navigator.share&&navigator.share({title:"Tarok igra",text:"Vabim te, da se pridružiš moji tarok skupini.",url:e}).then(()=>console.log("Success sharing")).catch(e=>console.log("Error sharing",e))}catch(e){}}function deleteAllData(){var e=dialogBuilder("Ali res želite izbrisati vse svoje podatke? Tega dejanja ni mogoče razveljaviti.",!1),t=e[0],a=e[1];let n=addElement("md-icon",t.parentNode,null);n.innerHTML="delete_outline",n.setAttribute("slot","icon"),a.addEventListener("click",function(e){hideDialog(t)});let l=document.createElement("div");l.setAttribute("slot","actions"),t.parentNode.appendChild(l);var i=document.createElement("md-text-button");i.innerHTML="Da";var o=document.createElement("md-filled-tonal-button");o.innerHTML="Ne",l.appendChild(i),l.appendChild(o),i.addEventListener("click",async function(){await deleteAllDataF(),location.reload(),hideDialog(t)}),o.addEventListener("click",function(){hideDialog(t)})}async function upload(){if(null!==sessionStorage.uid&&void 0!==sessionStorage.uid&&"null"!==sessionStorage.uid&&navigator.onLine)try{var e=decodeURIComponent(location.pathname.slice(1)),t=await loadDataPath(e);if(e.includes(sessionStorage.uid))dlgNotif("Ta skupina je vaša."),window.history.replaceState({},document.title,"/");else{var a=dialogBuilder("Ali se želite pridružiti skupini '"+t["!gameName!"]+"' z igralci "+JSON.stringify(Object.keys(t).filter(e=>"!gamesData!"!==e&&"!gameName!"!==e)).replace(/"/g,"").replace("[","").replace("]","").replace(/,/g,", ")+"?"),n=a[0],l=a[1];t["!gameName!"]=e,window.history.replaceState({},document.title,"/"),l.addEventListener("click",function(e){hideDialog(n)});let r=document.createElement("div");r.setAttribute("slot","actions"),n.parentNode.appendChild(r);var i=document.createElement("md-filled-tonal-button");i.innerHTML="Da";var o=document.createElement("md-text-button");o.innerHTML="Ne",r.appendChild(o),r.appendChild(i),i.addEventListener("click",function(){const e=JSON.parse(localStorage.getItem("games"))||{};e["/"+t["!gameName!"]]=t,localStorage.setItem("games",JSON.stringify(e)),updateUserData(),hideDialog(n),Game()}),o.addEventListener("click",function(){hideDialog(n)})}}catch(e){console.log("Not right link")}else location.pathname.includes("public")||dlgNotif("Za dostop do deljene skupine morate biti prijavljeni in imeti internetno povezavo.")}function hideElement(e){e.style.animation="hideScreen .2s forwards",setTimeout(()=>{e.remove()},200)}function changeOpis(e,t){"mainSheet"==e.className?e.parentNode.parentNode.querySelector("p").innerHTML=t:e.parentNode.querySelector('[slot="headline"]').getElementsByTagName("span")[0].innerHTML=t}function dialogBuilder(e,t){var a=document.createElement("md-dialog");a.setAttribute("open",""),a.getOpenAnimation&&(queryAnim?noDialogAnimations(a):dialogAnimations(a));var n=addElement("span",a,null);n.setAttribute("slot","headline"),n.setAttribute("class","dialog-headline"),n.innerHTML='<span style="flex: .83;">'+e+"</span>";var l=document.createElement("md-icon-button");if(!1!==t){l.setAttribute("value","close"),l.classList.add("iksRight"),l.innerHTML='<md-icon>close</md-icon><md-ripple for="touch" class="unbounded"></md-ripple>',n.appendChild(l);var i=addElement("md-icon-button",n,"iksRight");i.innerHTML="<md-icon>help</md-icon>",i.style.right="50px",i.addEventListener("click",function(){helpMe(a)})}var o=addElement("div",a,null);return o.setAttribute("style","display: flex;flex-wrap: wrap;justify-content: center;"),o.setAttribute("slot","content"),a.addEventListener("cancel",function(){hideDialog(o)}),document.body.appendChild(a),setTimeout(()=>{try{document.querySelector("body > md-dialog").shadowRoot.querySelector(".scrim").style.zIndex="3"}catch{}},3),o.setAttribute("method","dialog"),[o,l]}function Game(e){if(e)clickedUser(e.toString(),e.toString());else{var t=document.getElementById("dlgSlct");t.innerHTML="";var a=document.createElement("md-list"),n=document.createElement("md-list");n.style.marginBottom="30px";const e=JSON.parse(localStorage.getItem("games"))||{};if(0==Object.keys(e).length){var l=document.createElement("p");l.innerHTML="Nimate še nobenih skupin.",t.appendChild(l)}else{for(var i=0;i<Object.keys(e).length;i++){let t=Object.keys(e)[i],l=t;if(t.includes("/users/")){if(t=t.slice(t.lastIndexOf("/")+1),"!gamesData!"!==t||"!gameName!"!==t){var o=addElement("md-list-item",null,null);if(o.setAttribute("type","button"),o.setAttribute("interactive",""),n.getElementsByTagName("md-list-item").length>0){let e=addElement("md-divider",n,null);e.setAttribute("style","height:5px;--md-divider-color: var(--md-sys-color-surface)")}o.innerHTML+=t,o.addEventListener("click",async function(){await clickedUser(t,l)});let e=addElement("md-icon-button",o,null);e.setAttribute("slot","end"),e.innerHTML="<md-icon >close</md-icon>",e.addEventListener("click",async function(){event.stopPropagation(),listOfPlayers=await loadDataPath(l),listOfPlayers["!gameName!"]=l,deleteGame()}),n.appendChild(o)}}else if("!gamesData!"!==t||"!gameName!"!==t){o=addElement("md-list-item",null,null);if(o.setAttribute("type","button"),o.setAttribute("interactive",""),a.getElementsByTagName("md-list-item").length>0){let e=addElement("md-divider",a,null);e.setAttribute("style","height:5px;--md-divider-color: var(--md-sys-color-surface)")}o.innerHTML+=t,o.addEventListener("click",async function(){await clickedUser(t,l)});let e=addElement("md-icon-button",o,null);e.setAttribute("slot","end"),e.innerHTML="<md-icon >delete</md-icon>",e.addEventListener("click",function(){event.stopPropagation(),listOfPlayers=JSON.parse(localStorage.games)[l.toString()],deleteGame()}),a.appendChild(o)}}var r=document.createElement("p"),s=document.createElement("p");0!==a.getElementsByTagName("md-list-item").length&&(s.innerHTML="Moje skupine",t.appendChild(s),t.appendChild(a)),0!==n.getElementsByTagName("md-list-item").length&&(r.innerHTML="Deljene skupine",t.appendChild(r),t.appendChild(n))}t.style.setProperty("--wipe-position","100%"),t.style.transform="translateY(0px)"}}function hideDialog(e){e.parentNode.close(),queryAnim?e.parentNode.remove():setTimeout(()=>{e.parentNode.remove()},150)}async function clickedUser(e,t){let a=decodeURIComponent(t);if(e!==a)if(navigator.onLine)try{listOfPlayers=await loadDataPath(a),listOfPlayers["!gameName!"]=a}catch{dlgNotif("Zgodila se je napaka. Skupina je bila verjetno izbrisana.");const e=JSON.parse(localStorage.getItem("games"))||{};delete e[a],localStorage.setItem("games",JSON.stringify(e)),updateUserData()}else dlgNotif("Brez internetne povezave ne morete dostopati do deljene skupine.");else{const t=JSON.parse(localStorage.getItem("games"))||{};listOfPlayers=t[e]}void 0!==listOfPlayers&&(listOfPlayers["!gamesData!"]||(listOfPlayers["!gamesData!"]=[]),getGenders(),listOfPlayers["!gameName!"].includes("/users/")?(updateSharedRemote(),window.history.pushState({},document.title,"/"+e),count(!0)):(window.history.pushState({},document.title,"/"+e),count(!0)))}function dlgNotif(e,t="Napaka"){var a=addElement("md-text-button",null,null);a.innerHTML="Ok";var n=dialogBuilder(t,!1)[0];a.addEventListener("click",function(e){hideDialog(n)});let l=document.createElement("div");l.setAttribute("slot","actions"),n.parentNode.appendChild(l),l.appendChild(a),n.innerHTML=e}function undo(){listOfPlayersCopy.length>0&&(listOfPlayers=JSON.parse(listOfPlayersCopy[listOfPlayersCopy.length-1]),listOfPlayersCopy.pop(),count(!0)),0==listOfPlayersCopy.length&&(document.querySelector(".undoBtn").disabled=!0)}function newGame(){var e=makeBottomheet("Vpišite člane");listOfPlayers={};let t=1;var a=document.createElement("md-outlined-text-field"),n=document.createElement("md-text-button"),l=document.createElement("md-filled-tonal-button");n.setAttribute("id","addPlayer"),n.setAttribute("slot","content"),n.style.margin=l.style.margin="0",n.innerHTML="Dodaj igralca",a.style.marginBottom="10px",a.label="Ime",a.style.borderRadius="4px",a.setAttribute("slot","content"),l.innerHTML="Naprej",e.appendChild(a),setTimeout(()=>{a.shadowRoot.querySelector(".field").setAttribute("focused",""),a.focus()},10);let i=addElement("div",e,"break");i.style.height="10px",e.appendChild(n),e.appendChild(l),n.addEventListener("click",function(){let a=addElement("md-outlined-text-field",e,null);a.style.borderRadius="4px",a.label="Ime",a.style.marginBottom="10px",e.insertBefore(a,i),setTimeout(()=>{a.shadowRoot.querySelector(".field").setAttribute("focused",""),a.focus()},10),a.focus,t++,5==t&&(n.disabled=!0)}),l.addEventListener("click",async function(){let t=!1;for(var a=0;a<document.getElementsByTagName("md-outlined-text-field").length;a++){let e=document.getElementsByTagName("md-outlined-text-field")[a];(0==e.value.length||e.value.includes("/"))&&(e.style.outline="7px red solid",setTimeout(()=>{e.style.outline="0px red solid"},200),t=!0)}if(!t){for(a=0;a<document.getElementsByTagName("md-outlined-text-field").length;a++){let e=document.getElementsByTagName("md-outlined-text-field")[a].value;listOfPlayers[e]=[""]}listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),e.innerHTML="",n.remove(),l.remove(),listOfPlayers["!gamesData!"]=[],changeOpis(e,"Vpišite vzdevek skupine");var i=document.createElement("md-filled-text-field");setTimeout(()=>{i.shadowRoot.querySelector(".field").setAttribute("focused",""),i.focus()},10);var o=document.createElement("md-filled-tonal-button");i.label="Vzdevek skupine",i.value=JSON.stringify(Object.keys(listOfPlayers).filter(e=>"!gamesData!"!==e)).replace(/"/g,"").replace("[","").replace("]","").split(",").sort().toString().replace(/,/g,", "),o.innerHTML="Končano",e.appendChild(i),addElement("div",e,"break").style.height="10px",e.appendChild(o),console.log(listOfPlayers),getGenders(),o.addEventListener("click",function(){0==i.value.length||i.value.includes("/")?(i.style.outline="7px red solid",setTimeout(()=>{i.style.outline="0px red solid"},200)):(listOfPlayers["!gameName!"]=i.value,navigator.onLine||(localStorage.offlineChanges=!0),document.querySelector(".bottomSheetScrim").click(),count(!1,!0))})}})}async function getGenders(){for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;const t=await fetch("https://pxweb.stat.si/SiStatData/api/v1/sl/Data/?query="+encodeURIComponent(e)),a=await t.json();"string"==typeof listOfPlayers[e]&&(listOfPlayers[e]=[listOfPlayers[e]]),JSON.stringify(a).includes("Ženska imena")?listOfPlayers[e][1]="Z":JSON.stringify(a).includes("Moška imena")?listOfPlayers[e][1]="M":listOfPlayers[e][1]="N"}}function loclStrg(){var e=prompt("Input"),t=JSON.parse(e.toString());for(const[e,a]of Object.entries(t))localStorage.setItem(e,a)}async function count(e,t=null){try{e&&(document.querySelector(".cntScreen").style.animation="hideScreen var(--transDur) forwards cubic-bezier(.3,.5,0,1.3)",document.querySelector(".crezultLine").style.animation="hideScreen var(--transDur) forwards cubic-bezier(.3,.5,0,1.3)")}catch{}let a;a=e?30:0,await new Promise(e=>setTimeout(e,a)),listOfPlayers["!gamesData!"]||(listOfPlayers["!gamesData!"]=[]);try{removeElement(document.querySelector(".cntScreen"),document.querySelector(".crezultLine"))}catch(e){}setTimeout(()=>{let e=document.getElementsByTagName("md-dialog");for(let t=0;t<e.length;t++)e[t].remove()},300),listOfPlayersCopy.length>0&&(document.querySelector(".undoBtn").disabled=!1),
listOfPlayers["!gameName!"].includes("/users/")?(document.querySelector(".shrBtn").disabled=!0,"yes"!==document.getElementById("clck").label&&(document.getElementById("clck").addEventListener("click",function(){dlgNotif("Da povabite nekoga v skupino morate biti njen lastnik.")}),document.getElementById("clck").label="yes"),document.querySelector(".dltBtn").innerHTML="<md-icon>insert_chart</md-icon>"):(document.querySelector(".shrBtn").disabled=!1,document.querySelector(".dltBtn").innerHTML="<md-icon>insert_chart</md-icon>"),null!=sessionStorage.uid&&null!=sessionStorage.uid&&"null"!=sessionStorage.uid&&"undefined"!=sessionStorage.uid&&navigator.onLine||("yes"!==document.getElementById("clck").label&&(document.getElementById("clck").addEventListener("click",function(){dlgNotif("Da povabite nekoga v skupino morate biti prijavljeni in imeti internetno povezavo.")}),document.getElementById("clck").label="yes"),document.querySelector(".shrBtn").disabled=!0),document.getElementById("actionBar").style.display="flex",document.getElementById("homeContainer").style.display="none";const n=JSON.parse(localStorage.getItem("games"))||{};n[listOfPlayers["!gameName!"]]=listOfPlayers,localStorage.setItem("games",JSON.stringify(n)),updateUserData(),localStorage.removeItem(void 0);var l=addElement("div",document.body,"cntScreen");l.id="cntScreen",e&&(l.style.animation="showScreenGame var(--transDur) forwards cubic-bezier(0.05, 0.7, 0.1, 1.0)");var i=document.createElement("div");i.id="crezultLine";for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;let t=e;var o=document.createElement("div"),r=document.createElement("div");if(!Array.isArray(listOfPlayers[e])){const t=new Set([listOfPlayers[e]]);listOfPlayers[e][0]=Array.from(t)}r.innerHTML='<p class="namePlayers"> '+listOfPlayers[e][0].toString()+"<br>"+t+" </p>",o.innerHTML=String(o.innerHTML).replace("undefined",""),o.innerHTML+='<p style = "" class="noText" ></p>',o.innerHTML+=' <p style = "" class="noText" ></p>',o.setAttribute("class","chl chlName_"+t.replace(/ /g,"_")),console.log(e,Object.keys(listOfPlayers).at(-1)),e==Object.keys(listOfPlayers).at(-1)&&o.classList.add("chlScrollBar");let a=addElement("md-ripple",r,null);a.style.zIndex="10",o.style.display="inline-block;";var s=addElement("p",i,null);s.setAttribute("class","rezult_"+t.replace(/ /g,"_")),s.setAttribute("style","flex: 1; color: var(--_label-text-color); background-color:var(--md-sys-color-secondary-container); padding-top: 15px; padding-bottom: 15px; border-top-left-radius: 30px; border-top-right-radius: 30px; margin-left:10px;margin-right:10px;"),s.innerHTML="",r.setAttribute("class","prnt prntName_"+t.replace(/ /g,"_")),r.addEventListener("click",function(){event.target.className.includes("word")||addScore(t)}),r.appendChild(o),l.appendChild(r)}var d=0;let c={};document.body.appendChild(l);for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(c[e]=parseInt(0));listOfPlayers["!gamesData!"]||(listOfPlayers["!gamesData!"]=[]);for(var m=0;m<listOfPlayers["!gamesData!"].length;m++){let e=m;if(!listOfPlayers["!gamesData!"][e])continue;let t=listOfPlayers["!gamesData!"][e][1],a=listOfPlayers["!gamesData!"][e][3];if(!Array.isArray(t)){const e=new Set([t]);t=Array.from(e)}if(!Array.isArray(a)){const e=new Set([a]);a=Array.from(e),a.push(a[0])}for(const n of t){let l=a[t.indexOf(n)];var u=document.createElement("md-text-button");if(""!==l&&(listOfPlayers["!gamesData!"][e][9]&&(l=2*(games[listOfPlayers["!gamesData!"][e][0]][0]+listOfPlayers["!gamesData!"][e][5])+listOfPlayers["!gamesData!"][e][8],u.innerHTML=parseInt(l)),listOfPlayers["!gamesData!"][e][10]&&(l=4*(games[listOfPlayers["!gamesData!"][e][0]][0]+listOfPlayers["!gamesData!"][e][5])+listOfPlayers["!gamesData!"][e][8],u.innerHTML=parseInt(l)),listOfPlayers["!gamesData!"][e][4]?(l=2*parseInt(l),u.innerHTML=parseInt(l)):u.innerHTML=parseInt(l)),document.querySelector(".chlName_"+n.replace(/ /g,"_")).appendChild(u),u.style.marginTop="2px",u.style.marginBottom="2px",u.style.fontSize="1rem",!Array.isArray(listOfPlayers["!gamesData!"][e][1])){const t=new Set([listOfPlayers["!gamesData!"][e][1]]);listOfPlayers["!gamesData!"][e][1]=Array.from(t)}listOfPlayers["!gamesData!"][e][4]&&listOfPlayers["!gamesData!"][e][1][0]==n&&(u.innerHTML=u.innerHTML+"*"),u.classList.add(n+"_score"),u.classList.add("score_"+d),""!==l&&(c[n]=c[n]+parseInt(l)),"&bbsp;"!==u.innerHTML&&u.addEventListener("click",function(){event.stopPropagation(),gameData(event.target.getAttribute("class").slice(event.target.getAttribute("class").lastIndexOf("_")+1),d)}),""==l&&(u.innerHTML="&nbsp;"),addElement("div",document.querySelector(".chlName_"+n.replace(/ /g,"_")),"break")}for(const e in listOfPlayers)if(!t.includes(e)&&"!gamesData!"!=e&&"!gameName!"!=e){u=document.createElement("md-text-button");u.style.marginTop="2px",u.style.marginBottom="2px",u.style.fontSize="1rem",u.innerHTML="&nbsp;",document.querySelector(".chlName_"+e.replace(/ /g,"_")).appendChild(u),u.disabled=!0,u.classList.add("noText"),addElement("div",document.querySelector(".chlName_"+e.replace(/ /g,"_")),"break")}d++}let g=document.querySelectorAll(".namePlayers"),p=[...g].reduce((e,t)=>Math.max(e,t.clientHeight),0);g.forEach(e=>{e.style.height=p+"px"});try{const e=document.querySelectorAll(".chl");function f(t){const a=t.target.scrollTop;e.forEach(e=>{e.scrollTop=a})}e.forEach(e=>{e.addEventListener("scroll",f)})}catch(e){}i.setAttribute("class","crezultLine"),document.getElementById("bottomBar").appendChild(i),e&&(document.querySelector(".crezultLine").style.animation="showScreen var(--transDur) forwards cubic-bezier(0.3, 0.5, 0, 1.3)");for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(document.querySelector(".rezult_"+e.replace(/ /g,"_")).innerHTML=c[e]);if(e)setTimeout(()=>{var e=$(".chl");e.animate({scrollTop:[e.prop("scrollHeight"),"swing"]},{duration:e.prop("scrollHeight")/2,easing:"swing"})},1);else{var y=document.getElementsByClassName("chl")[0];y.scrollTo(0,y.scrollHeight+100)}}function addElement(e,t,a){var n=document.createElement(e);return a&&n.classList.add(a),t&&t.appendChild(n),n}function gameData(e,t){function a(e,t,a){let n=addElement("tr",o,"gameTdDiv");"Točke"==a&&(n.style.transform=" translateY(10px)",e=""+e.toString().replace("+",""));let l=addElement("td",n,"gameDataTd");l.innerHTML=t;let i=addElement("td",n,"gameDataTdBottom");i.innerHTML=e}var n=listOfPlayers["!gamesData!"][parseInt(e)];console.log(n);var l=makeBottomheet("Igra");if("Po meri"!==n[0]&&"Klop"!==n[0]){var i=document.createElement("md-outlined-text-field");i.type="number",n[4]?i.value=2*n[3]:i.value=n[3],i.label="Točke",l.appendChild(i)}var o=addElement("table",null,"gameData"),r=["Igra","Igralec","Partner","Točke","Radlc","Razlika","Uspeh","Bonusi","Bonus Točke","Kontra","Rekontra","Datum"];o.style.marginBottom="10px";for(let e=0;e<r.length;e++){var s=r[e];let t=n[e];completePodatki[s]=0==e&&"Po Meri"!==t?[e,t,games[t.toString()][0]]:[e,t]}if(console.log(completePodatki),completePodatki.Datum[1]){var d=new Date(completePodatki.Datum[1]),c=d.toLocaleString("sl-Si",{weekday:"long"})+", "+d.getDate()+". "+d.toLocaleString("sl-Si",{month:"long"})+" "+d.getFullYear()+", ob "+d.getHours()+"."+d.getMinutes();changeOpis(l,c)}let m,u,g;if(g="Igra",m=g,u=completePodatki[g][1],m=g+" "+completePodatki[g][1].toLowerCase(),m.toLowerCase().includes("po meri")||m.toLowerCase().includes("klop")||m.toLowerCase().includes("renons")||m.toLowerCase().includes("mondfang")){u=0,m.includes("po meri")?a("","Po meri"):m.includes("klop")?a("","Klop"):m.includes("mondfang")?a("","Mondfang"):a("","Renons"),"string"==typeof completePodatki.Igralec[1]&&(completePodatki.Igralec[1]=completePodatki.Igralec[1].split(",")),"number"==typeof completePodatki["Točke"][1]&&(completePodatki["Točke"][1]=completePodatki["Točke"][1].toString().split(","));for(let e=0;e<completePodatki.Igralec[1].length;e++){const t=completePodatki.Igralec[1][e];completePodatki.Radlc[1]&&!m.includes("mondfang")?a(2*completePodatki["Točke"][1][e],t):a(completePodatki["Točke"][1][e],t)}}else u=completePodatki[g][2],n[6]||(u="-"+u),a(u,m,g);completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||void 0===completePodatki.Razlika[1]||!1===completePodatki.Razlika[1]||null===completePodatki.Razlika[1]||(g="Razlika",m=g,u=completePodatki[g][1],n[6]||(u="-"+u),a(u,m,g));try{completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||completePodatki.Igra[1].toLowerCase().includes("mondfang")||!completePodatki.Kontra[1]||(g="Kontra",m=g,completePodatki.Kontra[1]&&(u=completePodatki.Igra[2]+completePodatki.Razlika[1]),!1!==u&&a(u,m,g))}catch{}try{completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||completePodatki.Igra[1].toLowerCase().includes("mondfang")||!completePodatki.Rekontra[1]||(g="Rekontra",m=g,completePodatki.Rekontra[1]&&(u=completePodatki.Igra[2]+completePodatki.Razlika[1]),!1!==u&&a(u,m,g))}catch{}if(!completePodatki.Igra[1].toLowerCase().includes("po meri")&&!completePodatki.Igra[1].toLowerCase().includes("klop"))if(g="Bonus Točke",m=g,u=completePodatki[g][1],"Bonus Točke"==g){let e=completePodatki.Bonusi[1],t={Kralji:20,Trula:20,"Pagat ultimo":50,"Kralj ultimo":20};for(const n in completePodatki.Bonusi[1])e[n][1]?e[n][3]?a(e[n][0],"Napovedano in kontrirano: <wbr>"+n,g):e[n][4]?a(e[n][0],"Napovedano in rekontrirano: <wbr>"+n,g):a(t[n],"Napovedano: <wbr>"+n,g):a(e[n][0],n,g)}else n[6]||u.toString().includes("-")||(u="-"+u),a(u,m,g);completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||(g="Radlc",m=g,u=completePodatki[g][1],completePodatki.Radlc[1]&&(u=completePodatki["Točke"][1],completePodatki.Kontra[1]&&(u=2*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1]),completePodatki.Rekontra[1]&&(u=4*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1])),!1!==u&&a(u,m,g)),completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||(g="Točke",m=g,u=completePodatki[g][1],completePodatki.Kontra[1]&&(u=2*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1]),completePodatki.Rekontra[1]&&(u=4*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1]),completePodatki.Radlc[1]&&(u*=2),a(u,m,g)),l.appendChild(o);let p=addElement("div",l,"break");p.style.height="10px";var f=document.createElement("md-text-button");f.innerHTML=' <svg slot="icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg> Izbriši',l.appendChild(f),f.style.margin="0",f.addEventListener("click",function(t){if(listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].splice(e,1),!Array.isArray(completePodatki.Igralec[1])){const e=new Set([completePodatki.Igralec[1]]);completePodatki.Igralec[1]=Array.from(e)}if(!0===completePodatki.Radlc[1]&&completePodatki["Točke"][1]>-1){if(!Array.isArray(listOfPlayers[completePodatki.Igralec[1][0]])){const e=new Set([listOfPlayers[completePodatki.Igralec[1][0]]]);listOfPlayers[completePodatki.Igralec[1][0]]=Array.from(e)}listOfPlayers[completePodatki.Igralec[1][0]][0]=listOfPlayers[completePodatki.Igralec[1][0]][0]+"*"}const a=Object.keys(listOfPlayers["!gamesData!"]);a.sort((e,t)=>e-t);const n=JSON.parse(localStorage.getItem("games"))||{};n[listOfPlayers["!gameName!"]]=listOfPlayers,localStorage.setItem("games",JSON.stringify(n)),updateUserData(),document.querySelector(".bottomSheetScrim").click(),count(!0)});var y=document.createElement("md-filled-button");y.innerHTML="Končano",y.style.margin="0",l.appendChild(y),y.addEventListener("click",function(t){document.querySelector(".bottomSheetScrim").click(),"Po Meri"!==n[0]&&"Klop"!==n[0]&&listOfPlayers["!gamesData!"][e][3]!==i.value&&(listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),n[4]?listOfPlayers["!gamesData!"][e][3]=i.value/2:listOfPlayers["!gamesData!"][e][3]=i.value,count(!0))})}function deleteGame(e){var t;t=e||(listOfPlayers["!gameName!"].includes("/users/")?dialogBuilder("Ali želite zapustiti deljeno skupino "+listOfPlayers["!gameName!"].slice(listOfPlayers["!gameName!"].lastIndexOf("/"))+"?",!1)[0]:dialogBuilder("Ali želite izbrisati skupino "+listOfPlayers["!gameName!"]+"?",!1)[0]);let a=addElement("md-icon",t.parentNode,null);a.innerHTML="delete_outline",a.setAttribute("slot","icon");var n=document.createElement("md-text-button");n.innerHTML="Da";var l=document.createElement("md-filled-tonal-button");l.innerHTML="Ne";let i=document.createElement("div");i.setAttribute("slot","actions"),t.parentNode.appendChild(i),i.appendChild(n),i.appendChild(l),n.addEventListener("click",function(){navigator.onLine||(localStorage.offlineChanges=!0);const e=JSON.parse(localStorage.getItem("games"))||{};delete e[listOfPlayers["!gameName!"]],navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers=[],localStorage.setItem("games",JSON.stringify(e)),updateUserData(),document.querySelector(".homeBtn").click(),hideDialog(t),Game()}),l.addEventListener("click",function(){listOfPlayers=[],hideDialog(t)})}async function resolveAfter(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}function removeElement(){for(const e of arguments)e.remove()}function privacy(){var e=dialogBuilder("Politika"),t=e[0],a=e[1];t.parentNode.classList.add("fullscreen"),a.addEventListener("click",function(e){$("#homeContainer").show(),setTimeout(()=>{hideDialog(t),document.getElementById("homeContainer").style.animation=""},1)});try{dlgFullscreen(t.parentNode)}catch{}var n=addElement("p",t,null);n.setAttribute("style","white-space: pre;text-wrap: wrap;width: 80%;margin: 20px;color: var(--colorTxtDialog);"),n.innerHTML=policyTxt}function feedback(){var e=makeBottomheet("Povratne informacije"),t=document.createElement("md-outlined-text-field");t.setAttribute("type","textarea"),t.setAttribute("rows","10"),t.setAttribute("style","height: 25vh;width: 90%; resize: vertical;word-wrap: break-word;"),t.label="Vpišite kaj bi radi izboljšali...",t.placeholder="Kar po domače...",e.appendChild(t),setTimeout(()=>{t.shadowRoot.querySelector(".field").setAttribute("focused",""),t.focus()},10);var a=document.createElement("md-filled-tonal-button");a.innerHTML="Pošlji",addElement("div",e,"break"),e.appendChild(a),a.addEventListener("click",function(){window.open("mailto:stevec.taroka@gmail.com?subject=Imam izbolšavo&body="+t.value,"_blank")})}function facebookIntent(e){let t;t=e.includes("install")?dialogBuilder("Naloži aplikacijo"):dialogBuilder("Prijava");let a=t[0],n=t[1];n.addEventListener("click",function(e){hideDialog(a)}),a.innerHTML="Zaradi omejitev Facebooka morate aplikacijo odpreti v brskalniku.";let l=document.createElement("div");l.setAttribute("slot","actions"),a.parentNode.appendChild(l);let i=addElement("md-filled-button",l,null);i.innerHTML="Odpri",i.addEventListener("click",function(){window.location.href=`intent://${e}#Intent;scheme=https;end`,window.location=`googlechrome://${e}`})}function installApp(){if(["fb_iab","fban","fbav","instagram"].some(e=>navigator.userAgent.toLowerCase().includes(e)))facebookIntent("stevec-taroka.si/install-app");else{let e=dialogBuilder("Naloži aplikacijo"),t=e[0],a=e[1];a.addEventListener("click",function(e){hideDialog(t)}),t.innerHTML="Prenesite apklikacijo za lažji dostop do vaših iger.";let n=document.createElement("div");n.setAttribute("slot","actions"),t.parentNode.appendChild(n);let l=addElement("md-filled-button",n,null);l.innerHTML="Prenesi",l.addEventListener("click",function(){document.getElementById("pwa").click(),hideDialog(t)})}}function settings(){var e=dialogBuilder("Nastavitve"),t=e[0],a=e[1];t.parentNode.classList.add("fullscreen"),a.addEventListener("click",function(e){document.getElementById("homeContainer").style.animation="none",$("#homeContainer").show(),setTimeout(()=>{hideDialog(t),document.getElementById("homeContainer").style.animation=""},1)}),dlgFullscreen(t.parentNode);var n=addElement("md-list",t,null),l=addElement("md-list-item",n,null);l.innerHTML="Zaokroževanje razlike&nbsp;&nbsp;&nbsp;&nbsp;";var i=addElement("md-switch",l,null);i.setAttribute("slot","end"),1!=JSON.parse(localStorage.getItem("razlikaOkrozi"))&&null!=localStorage.getItem("razlikaOkrozi")||i.setAttribute("selected",""),l.addEventListener("click",function(){i.selected=!i.selected}),l.setAttribute("type","reset"),l.addEventListener("change",function(){"true"==localStorage.getItem("razlikaOkrozi")||null==localStorage.getItem("razlikaOkrozi")?localStorage.setItem("razlikaOkrozi","false"):localStorage.setItem("razlikaOkrozi","true"),zaokrožuj=JSON.parse(localStorage.getItem("razlikaOkrozi"))});var o=makeThemeChanger();n.appendChild(o);var r=addElement("md-list-item",n);r.innerHTML="Politika <md-icon slot='start'>policy</md-icon>",r.addEventListener("click",privacy),r.setAttribute("style","margin: 10px 0;"),addElement("md-ripple",r);var s=addElement("md-list-item",n);s.innerHTML="<span style='color:var(--md-sys-color-on-error-container)'>Izbriši račun</span> <md-icon slot='start' style='color:var(--md-sys-color-on-error-container)'>delete</md-icon>",s.addEventListener("click",deleteAllData),addElement("md-ripple",s)}function makeThemeChanger(){const e=localStorage["seed-color"]||"267,100";let t=e.split(",");var a=addElement("md-filled-card",null,"hueCard");addElement("p",a,"colorTitle").innerHTML="Barva aplikacije";let n=addElement("md-slider",a,"colorGradient");n.classList.add("sliderStyle"),n.max="360",n.value=t[0];let l=addElement("div",a,null);l.style.height="15px",l.style.width="3px",addElement("p",a,"colorTitle").innerHTML="Nasičenost";let i=addElement("md-slider",a,"sliderStyle");i.value=t[1],n.addEventListener("input",function(){localStorage["seed-color"]=n.value+","+i.value,i.style.setProperty("--_active-track-color",changeTheme(n.value,i.value)),i.style.setProperty("--_inactive-track-color",changeTheme(n.value,i.value))}),i.style.setProperty("--_active-track-color",changeTheme(n.value,i.value)),i.style.setProperty("--_inactive-track-color",changeTheme(n.value,i.value)),i.addEventListener("input",function(){localStorage["seed-color"]=n.value+","+i.value,changeTheme(n.value,i.value)});let o=addElement("div",a,null);o.style.height="15px",o.style.width="3px",addElement("p",a,"colorTitle").innerHTML="Tema";let r=addElement("md-outlined-segmented-button-set",a,"noShowScreen"),s=addElement("md-outlined-segmented-button",r,null),d=addElement("md-outlined-segmented-button",r,null),c=addElement("md-outlined-segmented-button",r,null),m=addElement("md-icon",s,null),u=addElement("md-icon",d,null),g=addElement("md-icon",c,null);return m.setAttribute("slot","icon"),u.setAttribute("slot","icon"),g.setAttribute("slot","icon"),m.innerHTML="light_mode",u.innerHTML="brightness_medium",g.innerHTML="dark_mode",s.addEventListener("click",function(){localStorage.mode="light",changeTheme(n.value,i.value)}),c.addEventListener("click",function(){localStorage.mode="dark",changeTheme(n.value,i.value)}),d.addEventListener("click",function(){localStorage.mode="sys",changeTheme(n.value,i.value)}),"dark"==localStorage.mode?c.selected=!0:"light"==localStorage.mode?s.selected=!0:"sys"==localStorage.mode&&(d.selected=!0),a}function helpMe(e){if(!document.getElementById("pomoc")){var t=dialogBuilder("Pomoč"),a=t[0],n=t[1];a.parentNode.classList.add("fullscreen"),n.addEventListener("click",function(t){e?setTimeout(()=>{hideDialog(a)},1):(document.getElementById("homeContainer").style.animation="none",document.getElementById("homeContainer").style.display="block",setTimeout(()=>{hideDialog(a),document.getElementById("homeContainer").style.animation=""},1))}),dlgFullscreen(a.parentNode,e),a.innerHTML=pomoc;var l=document.getElementById("pomoc").getElementsByTagName("md-list-item");for(const e of l)e.addEventListener("click",function(){"0px"==e.getElementsByTagName("p")[0].style.height?(expandSection(e.getElementsByTagName("p")[0]),e.getElementsByTagName("md-icon")[0].innerHTML="expand_less"):(collapseSection(e.getElementsByTagName("p")[0]),e.getElementsByTagName("md-icon")[0].innerHTML="expand_more")})}}function collapseSection(e){var t=e.scrollHeight,a=e.style.transition;e.style.transition="",requestAnimationFrame(function(){e.style.height=t+"px",e.style.transition=a,requestAnimationFrame(function(){e.style.height="0px"})}),e.setAttribute("data-collapsed","true")}function expandSection(e){var t=e.scrollHeight;e.style.height=t+"px",e.addEventListener("transitionend",function(t){e.removeEventListener("transitionend",arguments.callee),e.style.height=null}),e.setAttribute("data-collapsed","false")}function checkConset(){const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const a=e[t].trim();if(a.startsWith("consentCookies="))return!0}return!1}function makeBottomheet(e,t){let a=addElement("div",document.body,"bottomSheet"),n=addElement("div",a,"sheetContents"),l=addElement("div",a,"handleHolder");var i;""!==e&&(i=addElement("div",l,"bottomSheetTitle"),i.innerHTML='<p style="margin:0;">'+e+"</p>",addElement("md-elevation",i),i.style.margin="-"+(i.offsetHeight+34)+"px");addElement("div",l,"bottomSheetHandle");let o=addElement("div",document.body,"bottomSheetScrim"),r=addElement("main",n,"mainSheet");setTimeout(()=>{o.style.opacity=".32"},10),o.addEventListener("click",function(){t&&!checkConset()||(s=0,v())});let s,d=document.querySelector('meta[name="theme-color"]').getAttribute("content");const c=e=>{s=Math.max(0,Math.min(100,e)),a.style.transform=`translateY(${100-s}dvh)`,100===s?(a.classList.add("fullscreenSheet"),document.querySelector('meta[name="theme-color"]').setAttribute("content",getComputedStyle(document.body).getPropertyValue("--md-sys-color-surface-container"))):(a.classList.remove("fullscreenSheet"),document.querySelector('meta[name="theme-color"]').setAttribute("content",d))},m=e=>e.touches?e.touches[0]:e;let u;const g=e=>{u=m(e).pageY,n.classList.add("not-selectable"),p=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)};var p=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),f=0;window.onmousedown=function(){++f},window.onmouseup=function(){--f};const y=n=>{if(f||"touchmove"==n.type){if("MD-SLIDER"==n.target.tagName)return;const g=m(n).pageY;var l=u-g;const f=l/window.innerHeight*100;if(t&&s<25)return void c(25);var d;c(s+f),s>(p-52)/p*100?(i.classList.add("titleFull"),r.style.paddingTop="85px"):(i.classList.remove("titleFull"),r.style.paddingTop="30px");const y=Math.min(r.clientHeight,r.scrollHeight);d=y/p*100,s<d/2&&!r.innerHTML.includes("md-list")||r.innerHTML.includes("md-list")&&s<25?(""!==e&&(i.style.transform="scale(1,0)"),a.classList.add("escapingSheet"),o.style.opacity="0",a.style.transition="all calc(var(--transDur) - 0.1s)",setTimeout(()=>{a.style.transition=""},400)):(""!==e&&(i.style.transform="scale(1)"),a.classList.remove("escapingSheet"),o.style.opacity=".32"),u=g}},v=()=>{setTimeout(()=>{var e;u=void 0,n.classList.remove("not-selectable");const t=Math.min(r.clientHeight,r.scrollHeight);e=t/p*100,r.innerHTML.includes("md-list")?s>95?c(100):s>25?c(Math.min(e+5,75)):(h(!1),c(0)):s<e/2?(h(!1),c(0)):c(s>e+(100-e)/2?100:Math.max(Math.min(e+5,75),25)),s>(p-26)/p*100?(i.classList.add("titleFull"),r.style.paddingTop="85px"):(i.classList.remove("titleFull"),r.style.paddingTop="30px"),a.style.transition="all calc(var(--transDur) - 0.1s)",setTimeout(()=>{a.style.transition=""},400)},6)},h=t=>{a.setAttribute("aria-hidden",String(!t)),o.style.opacity="0",""!==e&&(i.style.transform="scale(1,0)"),a.addEventListener("transitionend",function(e){a.remove(),o.remove()},!1)};window.addEventListener("mousedown",g),window.addEventListener("touchstart",g),window.addEventListener("mousemove",y),window.addEventListener("touchmove",y),window.addEventListener("mouseup",v),window.addEventListener("touchend",v),a.style.transition="all calc(var(--transDur) - 0.1s)",setTimeout(()=>{a.style.transition=""},400),c(Math.min(n.offsetHeight,50,720/window.innerHeight*100));const b=new MutationObserver(e=>e.forEach(e=>{"childList"===e.type&&s<100&&(setTimeout(()=>{const e=Math.min(r.clientHeight,r.scrollHeight),t=e/p*100;c(Math.max(Math.min(t+5,75),25)),s>(p-52)/p*100?(i.classList.add("titleFull"),r.style.paddingTop="85px"):(i.classList.remove("titleFull"),r.style.paddingTop="30px"),i.style.margin="-"+(i.offsetHeight+34)+"px"},10),r.innerHTML.includes("md-list")&&n.scrollHeight>n.clientHeight&&(n.style.overflow="scroll",n.style.display="block"))}));return b.observe(r,{childList:!0}),r}function pravila(){var e=dialogBuilder("Pravila"),t=e[0],a=e[1];t.parentNode.classList.add("fullscreen"),a.addEventListener("click",function(e){$("#homeContainer").show(),setTimeout(()=>{hideDialog(t),document.getElementById("homeContainer").style.animation=""},1)});try{dlgFullscreen(t.parentNode)}catch{}t.innerHTML=pravilaText}function statistika(){function e(e,t,a,n){const l=t/e*100,i=(1-e/n)/.5*10,o=a/e*100,r=l-i-o;return Math.round(r)}function t(e,t){let a=addElement("md-item",u,"stat-item");a.innerHTML='<p class="titleTxt" slot="trailing-supporting-text">'+e+'</p><table style="width: 100%;margin-top:30px;">'+t+"</table>"}function a(e,t,a){const n=Object.keys(e).sort((a,n)=>e[n][t]-e[a][t]);var l;return l=n.map(a=>`<tr style="margin-bottom: -10px "><td>${a}</td><td style='text-align: center'>${e[a][t]}</td></tr>`),l.join("")}var n=dialogBuilder("Statistika - "+listOfPlayers["!gameName!"].slice(listOfPlayers["!gameName!"].lastIndexOf("/")+1)),l=n[0],i=n[1];l.parentNode.classList.add("fullscreen"),dlgFullscreen(l.parentNode),i.addEventListener("click",function(e){hideDialog(l)});let o=addElement("md-list",l,"stat-list"),r=0,s=[],d={};var c={};let m=["Klop","Renons","Mondfang","Po Meri"];for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;c[e]={},c[e].steviloIgranih=0,c[e].steviloSlepanih=0,c[e].steviloZmag=0,c[e].steviloIzgub=0,c[e].seznamTock=[],s.push(parseInt(document.querySelector(".rezult_"+e).innerHTML)),d[s.at(-1)]=e;let t=document.querySelectorAll("."+e+"_score");for(const a of t)c[e].seznamTock.push(a.innerHTML)}s.sort((e,t)=>t-e);let u=addElement("div",l,"flexer");for(const e in s){let e=addElement("md-list-item",o,"stat-item");e.innerHTML="<span style='font-weight: bold;font-size: larger' slot='start' >"+parseInt(r+1)+".</span>"+d[s[r]]+" ("+s[r]+")",r++}t("ŠTEVILO VSEH IGER",'<tr style="margin-bottom: -10px;font-size:2rem;text-align:center; "><td>'+listOfPlayers["!gamesData!"].length+"</td></tr>");for(const e of listOfPlayers["!gamesData!"])m.includes(e[0])||(c[e[1][0]].steviloIgranih+=1,e[6]?c[e[1][0]].steviloZmag+=1:c[e[1][0]].steviloIzgub+=1,2==e[1].length&&(c[e[1][1]].steviloSlepanih+=1));for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(c[e].odstotekZmag=Math.round(c[e].steviloZmag/c[e].steviloIgranih*100),c[e].odstotekIzgub=Math.round(c[e].steviloIzgub/c[e].steviloIgranih*100));for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;const a=e(c[t].steviloIgranih,c[t].steviloZmag,c[t].steviloIzgub,listOfPlayers["!gamesData!"].length);c[t].steviloProcentov=a}let g=a(c,"steviloIgranih");t("NAJVEČ ODIGRANIH IGER",g);let p=a(c,"steviloSlepanih");t("NAJVEČKRAT KLICANI IGRALCI",p);let f=a(c,"steviloZmag","odstotekZmag");t("ZMAGE",f);let y=a(c,"steviloIzgub","odstotekIzgub");t("PORAZI",y);let v=a(c,"steviloProcentov");t("POVPREČJE (RATING)",v)}var games={Tri:[10,!0,"",!0,"3"],Dve:[20,!0,"",!0,"2"],Ena:[30,!0,"",!0,"1"],"Solo tri":[40,!0,"",!1,"S3"],"Solo dve":[50,!0,"",!1,"S2"],"Solo ena":[60,!0,"",!1,"S1"],"Solo brez":[80,!1,"",!1,"SB"],Valat:[250,!1,"",!0,"V"],"Barvni Valat":[125,!1,"",!1,"BV"],"Berač":[70,!1,"",!1,"B"],"Odprti Berač":[90,!1,"",!1,"OB"],Klop:["",!1,"",!0,"K"],Renons:[0,!1,"",!0,"R"],Mondfang:[-21,!1,"",!1,"M"],"Po meri":[0,!1,"",!0,"+"],"Uredi radlce":["",!1,"",!0,"*"]},zaokrožuj=JSON.parse(localStorage.getItem("razlikaOkrozi"));null!=zaokrožuj&&null!=zaokrožuj||(zaokrožuj=!0);var listOfPlayers={},listOfPlayersCopy=[],completePodatki={},isLoaded=!1;setTimeout(()=>{isLoaded||(document.querySelector(".loaderInner").style.opacity="1")},500);var queryAnim=!1;window.addEventListener("load",function(){location.pathname.includes("install-app")&&installApp(),isLoaded=!0,queryAnim=window.matchMedia("(prefers-reduced-motion: reduce)").matches;try{document.querySelector(".loader").style.opacity="0",setTimeout(()=>{document.querySelector(".loader").remove()},400)}catch{}location.pathname.includes("users")||"/"===location.pathname||location.pathname.includes("privacy")||Game(decodeURIComponent(location.pathname.slice(1))),location.pathname.includes("privacy")&&privacy(),null==localStorage.offlineChanges||navigator.onLine&&(updateUserData(),localStorage.offlineChanges=void 0),null!==sessionStorage.uid&&void 0!==sessionStorage.uid&&"null"!==sessionStorage.uid&&"undefined"!==sessionStorage.uid&&watchChanges(),queryAnim&&document.body.style.setProperty("--transDur","0s")})
;const pomoc='<div id="pomoc"> <md-list>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako ustvariti novo skupino?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size:1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Za ustvarjanje nove skupine na domačem zaslonu kliknite na gumb \'Nova skupina\'.<br><br>Po kliku se bo odprlo okno, v katerem lahko vnesete imena igralcev, ki sodelujejo v skupini. Za dodajanje večih igralcev uporabite gumb \'Dodaj igralca\'. Po kliku gumba \'Naprej\' vnesite še vzdevek skupine in kliknite  \'Končano\'.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako dodati novo igro na seznam?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Če želite dodati novo igro, na zaslonu za štetje kliknite na igralca, ki jo je igral. Nato sledite navodilom, da boste uspešno dodali novo igro na seznam.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako spremeniti barvno temo?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Za spreminjanje barvne teme aplikacije na domačem zaslonu kliknite na gumb \'Nastavitve\', zatem pa gumb \'Tema aplikacije\' in izberite barvo, ki vam je všeč.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Zakaj Google prijava?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size:1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Prijava s storitvijo Google vam omogoča enostavno shranjevanje podatkov v oblaku. To pomeni, da lahko na katerikoli napravi, kjer se prijavite s svojim Google računom, dostopate do svojih iger in jih urejate. <br><br>Google prijava vam omogoča tudi deljenje igre s prijatelji.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kaj pomenijo gumbi v spodnjem delu zaslona za štetje?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>● <md-icon>home</md-icon> vam omogoča, da se vrnete na domači zaslon.<br><br>● <md-icon>undo</md-icon> vam omogoča, da razveljavite zadnje dejanje na seznamu.<br><br>● <md-icon>person_add</md-icon> vam omogoča, da povabite prijatelje v skupino, kjer bodo imeli tudi oni možnost urejanja.<br><br>● <md-icon>insert_chart</md-icon> vam omogoča vpogled v statistiko igre. </p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako povabiti prijatelje v skupino?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Če želite povabiti prijatelje v skupino, kliknite na tretji gumb v spodnjem delu zaslona <md-icon>person_add</md-icon>. Odpre se vam okno, kjer lahko kopirate ali delite povezavo do igre.<br><br>Ko prijatelj dobi povezavo, jo mora le odpreti.<br><br>Za dodajanje prijateljev v skupino morate biti prijavljeni in imeti internetno povezavo.</p>\n</md-list-item>\n</md-list><div class="break" style="height:80px;"></div></div>';window.addEventListener("scroll",e=>{e.preventDefault(),window.scrollTo(0,0)});const registerServiceWorker=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});e.installing?console.log("Service worker installing"):e.waiting?console.log("Service worker installed"):e.active&&(console.log("Service worker active"),e.update())}catch(e){console.error(`Registration failed with ${e}`)}};registerServiceWorker(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{let t=localStorage["seed-color"].split(",");changeTheme(t[0],t[1])}),window.addEventListener("popstate",function(e){console.log("BACK"),"/"==location.pathname&&document.querySelector(".homeBtn").click()}),window.addEventListener("load",async function(){function e(){n=!0,t=null,a.style.display="none"}let t=null;const a=document.querySelector("#pwa");let n=!1;window.addEventListener("appinstalled",()=>{e(),console.log("app installed")}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),t=e,a.style.display="flex",document.querySelector(".bubble").style.visibility="visible"}),window.matchMedia("(display-mode: standalone)").matches&&(e(),console.log("app standalone")),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(n||(a.style.display="flex"));var l=[];try{l=await navigator.getInstalledRelatedApps(),0===l.length||n||(a.innerHTML="<md-icon>open_in_new</md-icon>",a.style.display="flex")}catch{}a.addEventListener("click",async()=>{if(0===l.length)if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){let e=dialogBuilder("iOS Aplikacija")[0];e.innerHTML='Če želite naložiti aplikacijo, spodaj pritisnite gumb za deljenje&nbsp;<md-icon style="font-size: 1rem;display:contents;" aria-hidden="true">ios_share</md-icon></span>&nbsp;in poiščite gumb  "<md-icon style="font-size: 1rem;display:contents;" aria-hidden="true">add_box</md-icon> Add to home screen".';let t=document.createElement("div");t.setAttribute("slot","actions"),e.parentNode.appendChild(t);let a=addElement("md-text-button",t,null);a.innerHTML="Ok",a.addEventListener("click",function(){hideDialog(e)})}else{await t.prompt();e()}else window.open("/","_blank")})});