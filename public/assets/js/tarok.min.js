async function addScore(e){let t="Kaj je oseba "+e+" igrala?";"Z"==listOfPlayers[e][1]?t="Kaj je "+e+" igrala?":"M"==listOfPlayers[e][1]&&(t="Kaj je "+e+" igral?");var n=makeBottomheet(t);let a=0;for(const t in games){3!=a&&7!=a&&11!=a||(addElement("md-divider",n,null).style.margin="5px"),a++;let i=document.createElement("md-outlined-button");i.innerHTML=t,i.style.height="45px",i.classList.add("gameChose"),i.setAttribute("type","reset");var l=addElement("span",null,"btnIcon");l.setAttribute("slot","icon"),l.innerHTML=games[t][4],i.addEventListener("click",function(){document.querySelector(".sheetContents").style.display="flex",document.querySelector(".sheetContents").style.overflow="hidden",n.innerHTML="","Mondfang"==t?mondfang(n):"Renons"==t?renons(n):"Klop"==t?klop(n):"Po meri"==t?poMeri(n):"Uredi radlce"==t?radlciDodaj(n):calculate(t,games[t],n,e)}),n.appendChild(i)}}function radlciDodajSamo(){for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(listOfPlayers[e][0]+="*")}function radlciDodaj(e){function t(){for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;let t=addElement("label",n,null),a=addElement("md-outlined-text-field",t,"radlciPLayer");a.name=e,a.setAttribute("min","0"),a.setAttribute("type","text"),a.value=listOfPlayers[e][0],zaokrožuj&&a.setAttribute("step","5"),a.setAttribute("pattern","[\\*]"),a.label="Radlci osebe "+e,addElement("div",n,"break")}}changeOpis(e,"Uredi radlce"),e.innerHTML="";var n=addElement("div",e,null);let a=document.createElement("div");a.setAttribute("slot","actions"),e.parentNode.appendChild(a),t();let l=addElement("md-text-button",a,null);l.innerHTML="Dodaj radlce",l.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers));for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(listOfPlayers[e][0]+="*");n.innerHTML="",t()});let i=addElement("md-filled-button",a,null);i.innerHTML="Končano",i.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers));for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;let t=document.getElementsByName(e)[0].value;listOfPlayers[e][0]=t.replace(/[^*]/g,"")}document.querySelector(".bottomSheetScrim").click(),count(!1)})}function poMeri(e){changeOpis(e,"Vpišite toče");var t=[];for(const n in listOfPlayers){if("!gamesData!"==n||"!gameName!"==n)continue;let a=addElement("md-filled-text-field",e,null);addElement("div",e,"break"),a.classList.add("poMeri"),a.type="number",a.innerHTML=n,a.value=0,a.name=0,a.label=n,a.id="meri_"+n,t.push(a),a.addEventListener("change",function(){a.name=a.value})}var n=addElement("md-filled-button",e,null);n.innerHTML="Končano",n.setAttribute("type","reset"),n.addEventListener("click",function(){var e=[],n=[];for(const a of t)e.push(a.label),n.push(document.getElementById("meri_"+a.label).name);listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Po Meri",e,null,n,!1,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),count(!1,!0)})}async function klop(e){changeOpis(e,"Ali je bil kdo poln oz. prazen?");var t=addElement("md-outlined-button",e,null);t.innerHTML="Poln";var n=addElement("md-outlined-button",e,null);n.innerHTML="Prazen";var a=addElement("md-filled-button",e,null);a.innerHTML="Ne",t.setAttribute("type","reset"),n.setAttribute("type","reset"),a.setAttribute("type","reset"),a.style.flexBasis="100%",n.addEventListener("click",function(){e.innerHTML="",changeOpis(e,"Kdo je bil poln?");for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;let n=addElement("md-outlined-button",e,null);n.innerHTML=t,n.setAttribute("type","reset"),n.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Klop",n.innerHTML,null,70,listOfPlayers[n.innerHTML][0].length>0,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)})}}),t.addEventListener("click",function(){e.innerHTML="",changeOpis(e,"Kdo je bil prazen?");for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;let n=addElement("md-outlined-button",e,null);n.innerHTML=t,n.setAttribute("type","reset"),n.addEventListener("click",function(){listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Klop",n.innerHTML,null,-70,listOfPlayers[n.innerHTML][0].length>0,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)})}}),await waitForButtonClick([a]),e.innerHTML="";var l=[];for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;let n=addElement("label",e,null);n.innerHTML=t;let a=addElement("md-slider",n,"klopPlayer");a.setAttribute("max","35"),a.setAttribute("min","0"),a.setAttribute("labeled",""),zaokrožuj&&a.setAttribute("step","5"),a.setAttribute("ticks",""),a.label="Točke osebe "+t,l.push(t),addElement("div",e,"break")}addElement("div",e,"break");var i=addElement("md-filled-button",e,null);i.innerHTML="Končano",addElement("div",e,"break"),i.addEventListener("click",function(){let e=!0;var t=document.querySelectorAll(".klopPlayer"),n=[];for(const e of t)listOfPlayers[e.label.replace("Točke osebe ","")][0].length>0?n.push("-"+2*e.value):n.push("-"+e.value);listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].push(["Klop",l,null,n,null,null,null,null,!1,!1,!1,Date.now()]),radlciDodajSamo(),e&&(document.querySelector(".bottomSheetScrim").click(),count(!1,!0))})}async function mondfang(e){e.innerHTML="";let t,n=[];changeOpis(e,"Kdo je izgubil monda?");for(const a in listOfPlayers){if("!gamesData!"==a||"!gameName!"==a)continue;let l=addElement("md-outlined-button",e,null);l.innerHTML=a,n.push(l),l.setAttribute("type","reset"),l.addEventListener("click",function(){t=l,listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0)})}await waitForButtonClick(n),listOfPlayers["!gamesData!"].push(["Mondfang",t.innerHTML,null,-21,listOfPlayers[t.innerHTML][0].length>0,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),count(!1,!0)}async function renons(e){e.innerHTML="";let t,n=[];changeOpis(e,"Kdo je naredil renons?");for(const a in listOfPlayers){if("!gamesData!"==a||"!gameName!"==a)continue;let l=addElement("md-outlined-button",e,null);l.innerHTML=a,n.push(l),l.setAttribute("type","reset"),l.addEventListener("click",function(){t=l,listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0)})}await waitForButtonClick(n),e.innerHTML="",changeOpis(e,"Koliko znaša renons?");let a=addElement("md-slider",e,"klopPlayer");a.setAttribute("max","50"),a.setAttribute("min","0"),a.setAttribute("labeled",""),zaokrožuj&&a.setAttribute("step","5"),a.setAttribute("ticks",""),addElement("div",e,"break");let l=addElement("md-filled-button",e,null);l.innerHTML="Končano",l.addEventListener("click",function(){listOfPlayers["!gamesData!"].push(["Renons",t.innerHTML,null,-Math.abs(parseInt(a.value)),!1,null,!0,null,0,!1,!1,Date.now()]),document.querySelector(".bottomSheetScrim").click(),gameAnimation(),count(!1,!0)})}async function calculate(e,t,n,a){if(5==Object.keys(listOfPlayers).length)partner(n,e,t,!1,a);else{var l=addElement("md-filled-button",null,null),i=t[3];let r="Je oseba <b>"+a+"</b> igrala solo ali s partnerjem?";"Z"==listOfPlayers[a][1]?r="Je <b>"+a+"</b> igrala sama ali s partnerjem?":"M"==listOfPlayers[a][1]&&(r="Je <b>"+a+"</b> igral sam ali s partnerjem?"),changeOpis(n,r),l.setAttribute("type","reset");var o=[];if(l.addEventListener("click",function(){this.remove();for(let e=0;e<o.length;e++)o[e].remove();partner(n,e,t,!1,a)}),i){for(const i in listOfPlayers){if("!gamesData!"==i||"!gameName!"==i)continue;if(i==a)continue;let r=addElement("md-outlined-button",n,null);r.innerHTML=i,o.push(r),r.setAttribute("type","reset"),r.addEventListener("click",function(){l.remove();for(let e=0;e<o.length;e++)o[e].remove();partner(n,e,t,!0,a,i)})}l.innerHTML="Solo",l.style.flexBasis="100%",n.appendChild(l)}else partner(n,e,t,!1,a)}}function waitForButtonClick(e){return new Promise(t=>{for(const n in e)e[n].addEventListener("click",function(){t()})})}async function partner(e,t,n,a,l,i){var o="";a&&i&&(o=i),changeOpis(e,"Izberite razliko");var r=document.createElement("md-slider"),s=0;if(zaokrožuj){if(n[1]){var d=[0,5,10,15,20,25,30,35],c=[];addElement("div",e,"break");for(const t in d){let n=addElement("md-outlined-button",e,null);n.innerHTML=d[t],c.push(n),n.setAttribute("type","reset"),n.addEventListener("click",function(){r.value=n.innerHTML,s=n.innerHTML,n.remove(),e.innerHTML=""})}await waitForButtonClick(c)}}else if(r.setAttribute("labeled",""),n[1]){r.min=0,r.value=0,r.label="Razlika",r.max=35,r.style.marginTop="10px",e.appendChild(r),addElement("div",e,"break");let t=addElement("md-filled-button",e,null);t.innerHTML="Končano",t.setAttribute("type","reset"),r.addEventListener("change",function(){s=r.value}),await waitForButtonClick([t]),e.innerHTML=""}var m=addElement("md-filled-button",null,null),u=addElement("md-filled-tonal-button",null,null);m.style.height=u.style.height="50px",m.style.flexBasis=u.style.flexBasis="100%",addElement("div",e,"break"),addElement("div",e,"break"),m.innerHTML="Zmaga",u.innerHTML="Poraz",addElement("div",e,"break");var g={Trula:[10,20,null,null,!1],Kralji:[10,20,null,null,!1],"Pagat ultimo":[25,50,null,null,!1],"Kralj ultimo":[10,20,null,null,!1]},p=0;if(a)if(n[1]){let n="Osebi "+l+" in "+o+" sta igrali igro "+t.toLowerCase()+" z razliko "+s+".";"Z"==listOfPlayers[l][1]&&"Z"==listOfPlayers[o][1]?n=l+" in "+o+" sta igrali igro "+t.toLowerCase()+" z razliko "+s+".":"N"!==listOfPlayers[l][1]&&"N"!==listOfPlayers[o][1]&&(n=l+" in "+o+" sta igrala igro "+t.toLowerCase()+" z razliko "+s+"."),changeOpis(e,n)}else{let n="Osebi "+l+" in "+o+" sta igrali igro "+t.toLowerCase()+".";"Z"==listOfPlayers[l][1]&&"Z"==listOfPlayers[o][1]?n=l+" in "+o+" sta igrali igro "+t.toLowerCase()+".":"N"!==listOfPlayers[l][1]&&"N"!==listOfPlayers[o][1]&&(n=l+" in "+o+" sta igrala igro "+t.toLowerCase()+"."),changeOpis(e,n)}else if(o="partnerigralcakimuniimenic",n[1]){let n="Oseba "+l+" je igrala igro "+t.toLowerCase()+", z razliko "+s+".";"Z"==listOfPlayers[l][1]?n=l+" je igrala igro "+t.toLowerCase()+", z razliko "+s+".":"M"==listOfPlayers[l][1]&&(n=l+" je igral igro "+t.toLowerCase()+", z razliko "+s+"."),changeOpis(e,n)}else{o="partnerigralcakimuniimenic";let n="Oseba "+l+" je igrala igro "+t.toLowerCase()+".";"Z"==listOfPlayers[l][1]?n=l+" je igrala igro "+t.toLowerCase()+".":"M"==listOfPlayers[l][1]&&(n=l+" je igral igro "+t.toLowerCase()+"."),changeOpis(e,n)}if(n[1])for(const t in g){let n=document.createElement("md-outlined-button");n.innerHTML=t,n.style.transition=" all .2s",n.style.height="45px",n.addEventListener("click",function(){var a=$(e).children().detach();let l=e.parentNode.parentNode.querySelector(".bottomSheetTitle").innerText;e.innerHTML="";var i=e;changeOpis(e,"Izberite "),$(".iksRight").hide();var o=!0,r=!0;let s=addElement("md-outlined-segmented-button-set",i,null),d=addElement("md-outlined-segmented-button",s,null);d.setAttribute("type","reset");let c=addElement("md-outlined-segmented-button-set",i,null),m=addElement("md-outlined-segmented-button",c,null);m.label="Izgubljeno",m.addEventListener("click",function(){r=!1});let u=addElement("md-outlined-segmented-button",c,null);u.label="Dobljeno",u.addEventListener("click",function(){r=!0});let p=addElement("md-outlined-segmented-button",s,null);g[t][3]&&(p.selected=!0),0==g[t][3]&&(d.selected=!0),addElement("div",i,"break").style.height="10px";let y=addElement("md-text-button",i,null);y.innerHTML="Odstrani bonus",y.setAttribute("type","reset"),n.innerHTML=t,y.addEventListener("click",function(){g[t][2]=null,g[t][3]=null,g[t][4]=!1,n.innerHTML=t,$(".iksRight").show(),$(e).empty().append(a),changeOpis(e,l)});let f=addElement("md-filled-tonal-button",i,null);f.innerHTML="Končano",f.setAttribute("type","reset"),p.label="Napovedano",p.setAttribute("type","reset"),d.addEventListener("click",function(){o=!1}),p.addEventListener("click",function(){o=!0}),d.label="Tiho",addElement("div",i,"break").style.height="20px",g[t][2]&&(u.selected=!0),0==g[t][2]&&(m.selected=!0),f.addEventListener("click",function(){o?(g[t][3]=!0,n.innerHTML+='<md-icon slot="icon">checkbox</md-icon>'):(g[t][3]=!1,n.innerHTML+='<md-icon slot="icon">close</md-icon>'),r?(g[t][2]=!0,n.innerHTML+='<md-icon slot="icon">checkbox</md-icon>'):(g[t][2]=!1,n.innerHTML+='<md-icon slot="icon">close</md-icon>'),$(".iksRight").show(),$(e).empty().append(a),changeOpis(e,l)})}),e.appendChild(n)}addElement("md-divider",e,null).style.margin="5px";let y=addElement("md-outlined-button",e,null);y.innerHTML="Kontra";let f=addElement("md-outlined-button",e,null);f.innerHTML="Rekontra";var h=!1,v=!1,b=!1,k=!1,P=!1,E=!1,L=!1,O=!1,S=!1,T=!1;f.addEventListener("click",function(){var n=$(e).children().detach();let a=e.parentNode.parentNode.querySelector(".bottomSheetTitle").innerText;e.innerHTML="",!0;var l=e;changeOpis(e,"Izberite"),$(".iksRight").hide();var i=addElement("md-outlined-segmented-button-set",l,null);i.setAttribute("multiselect","");let o=addElement("md-outlined-segmented-button",i,null);o.label+="Igra "+t.toLowerCase(),o.addEventListener("click",function(){E=!!o.selected}),addElement("div",l,"break").style.height="20px";let r=addElement("md-text-button",l,null);if(r.innerHTML="Končano",r.addEventListener("click",function(t){$(".iksRight").show(),$(e).empty().append(n),changeOpis(e,a)}),g.Kralji[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralji",e.addEventListener("click",function(){L=!!e.selected})}if(g.Trula[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Trula",e.addEventListener("click",function(){O=!!e.selected})}if(g["Kralj ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralj ultimo",e.addEventListener("click",function(){S=!!e.selected})}if(g["Pagat ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Pagat ultimo",e.addEventListener("click",function(){T=!!e.selected})}}),y.addEventListener("click",function(){var n=$(e).children().detach();let a=e.parentNode.parentNode.querySelector(".bottomSheetTitle").innerText;e.innerHTML="";var l=e;changeOpis(e,"Izberite"),$(".iksRight").hide();var i=addElement("md-outlined-segmented-button-set",l,null);i.setAttribute("multiselect","");let o=addElement("md-outlined-segmented-button",i,null);o.label+="Igra "+t.toLowerCase(),o.addEventListener("click",function(){h=!!o.selected}),addElement("div",l,"break").style.height="20px";let r=addElement("md-text-button",l,null);if(r.innerHTML="Končano",r.addEventListener("click",function(t){$(".iksRight").show(),$(e).empty().append(n),changeOpis(e,a)}),g.Kralji[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralji",e.addEventListener("click",function(){v=!!e.selected})}if(g.Trula[3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Trula",e.addEventListener("click",function(){b=!!e.selected})}if(g["Kralj ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Kralj ultimo",e.addEventListener("click",function(){k=!!e.selected})}if(g["Pagat ultimo"][3]){let e=addElement("md-outlined-segmented-button",i,null);e.label+="Pagat ultimo",e.addEventListener("click",function(){P=!!e.selected})}}),addElement("md-divider",e,null).style.margin="5px",e.appendChild(u),e.appendChild(m),s=Math.abs(s),m.addEventListener("click",function(){let e={};v&&(g.Kralji[1]*=2),b&&(g.Trula[1]*=2),k&&(g["Kralj ultimo"][1]*=2),P&&(g["Pagat ultimo"][1]*=2),L&&(g.Kralji[1]*=4),O&&(g.Trula[1]*=4),S&&(g["Kralj ultimo"][1]*=4),T&&(g["Pagat ultimo"][1]*=4);let i={Kralji:v,Trula:b,"Pagat ultimo":P,"Kralj ultimo":k,Kralji2:L,Trula2:O,"Pagat ultimo2":T,"Kralj ultimo2":S};for(const t in g)null!==g[t][2]&&(!1!==g[t][2]?1==g[t][3]?(e[t]=[g[t][1],!0,!0,i[t],i[t+"2"]],p+=g[t][1]):(e[t]=[g[t][0],!1,!0,i[t],i[t+"2"]],p+=g[t][0]):1==g[t][3]?(e[t]=[-Math.abs(g[t][1]),!0,!1],i[t],i[t+"2"],p-=g[t][1]):(e[t]=[-Math.abs(g[t][0]),!1,!1,i[t],i[t+"2"]],p-=g[t][0]));listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),0===Object.keys(e).length&&(e=null),(""!==o||a)&&(n[1]?a?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,parseInt(n[0])+parseInt(s)+p,listOfPlayers[l][0].length>0,parseInt(s),!0,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,parseInt(n[0])+parseInt(s)+p,listOfPlayers[l][0].length>0,parseInt(s),!0,e,p,!1,!1,Date.now()]):a?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,parseInt(n[0]+p),listOfPlayers[l][0].length>0,null,!0,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,parseInt(n[0]+p),listOfPlayers[l][0].length>0,null,!0,e,p,!1,!1,Date.now()])),listOfPlayers["!gamesData!"].slice(-1)[0][3]>0&&listOfPlayers[l][0].length>0&&(listOfPlayers[l][0]=listOfPlayers[l][0].replace("*","")),h&&(listOfPlayers["!gamesData!"].at(-1)[9]=!0),E&&(listOfPlayers["!gamesData!"].at(-1)[10]=!0),document.querySelector(".bottomSheetScrim").click(),(t.includes("Valat")||t.includes("Berač"))&&radlciDodajSamo(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)}),u.addEventListener("click",function(){let e={};v&&(g.Kralji[1]*=2),b&&(g.Trula[1]*=2),k&&(g["Kralj ultimo"][1]*=2),P&&(g["Pagat ultimo"][1]*=2),L&&(g.Kralji[1]*=4),O&&(g.Trula[1]*=4),S&&(g["Kralj ultimo"][1]*=4),T&&(g["Pagat ultimo"][1]*=4);let i={Kralji:v,Trula:b,"Pagat ultimo":P,"Kralj ultimo":k,Kralji2:L,Trula2:O,"Pagat ultimo2":T,"Kralj ultimo2":S};for(const t in g)null!==g[t][2]&&(!1!==g[t][2]?1==g[t][3]?(e[t]=[g[t][1],!0,!0,i[t],i[t+"2"]],p+=g[t][1]):(e[t]=[g[t][0],!1,!0,i[t],i[t+"2"]],p+=g[t][0]):1==g[t][3]?(e[t]=[-Math.abs(g[t][1]),!0,!1],i[t],i[t+"2"],p-=g[t][1]):(e[t]=[-Math.abs(g[t][0]),!1,!1,i[t],i[t+"2"]],p-=g[t][0]));listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),0===Object.keys(e).length&&(e=null),n[1]?a?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,-Math.abs(parseInt(n[0])+parseInt(s))+p,listOfPlayers[l][0].length>0,parseInt(s),!1,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,-Math.abs(parseInt(n[0])+parseInt(s))+p,listOfPlayers[l][0].length>0,parseInt(s),!1,e,p,!1,!1,Date.now()]):a?listOfPlayers["!gamesData!"].push([String(t),[l,o],null,-Math.abs(parseInt(n[0]))+p,listOfPlayers[l][0].length>0,null,!1,e,p,!1,!1,Date.now()]):listOfPlayers["!gamesData!"].push([String(t),l,null,-Math.abs(parseInt(n[0]))+p,listOfPlayers[l][0].length>0,null,!1,e,p,!1,!1,Date.now()]),listOfPlayers["!gamesData!"].slice(-1)[0][3]>0&&listOfPlayers[l][0].length>0&&(listOfPlayers[l][0]=listOfPlayers[l][0].replace("*","")),h&&(listOfPlayers["!gamesData!"].at(-1)[9]=!0),E&&(listOfPlayers["!gamesData!"].at(-1)[10]=!0),document.querySelector(".bottomSheetScrim").click(),(t.includes("Valat")||t.includes("Berač"))&&radlciDodajSamo(),gameAnimation(),setTimeout(()=>{count(!1,!0)},200)})}function gameAnimation(){let e=listOfPlayers["!gamesData!"].at(-1)[3];listOfPlayers["!gamesData!"].at(-1)[9]&&(e=2*(games[listOfPlayers["!gamesData!"].at(-1)[0]][0]+listOfPlayers["!gamesData!"].at(-1)[5])+listOfPlayers["!gamesData!"].at(-1)[8]),listOfPlayers["!gamesData!"].at(-1)[10]&&(e=4*(games[listOfPlayers["!gamesData!"].at(-1)[0]][0]+listOfPlayers["!gamesData!"].at(-1)[5])+listOfPlayers["!gamesData!"].at(-1)[8]),listOfPlayers["!gamesData!"].at(-1)[4]&&(e*=2);let t=addElement("div",document.body,"bottomSheetScrim"),n=addElement("div",document.body,"bottomSheetScrim");n.classList.add("scoreAnimHolder");let a=addElement("div",n,"scoreAnimation"),l=addElement("span",n,"scoreTxt");a.style.width=((e>0?"+":"")+e).length+"ch",setTimeout(()=>{t.style.opacity=".5",a.style.scale="1",l.style.fontSize="4rem"},200),l.innerHTML=(e>0?"+":"")+e,setTimeout(()=>{setTimeout(()=>{l.style.maxWidth=((e>0?"+":"")+e).length+"ch"},200);const t=e>0?["😂","🤣","😁","😀","😎","😆","😅","😃"]:["😒","😥","😣","😫","😖","🤬","😭","😧"];for(let e=0;e<20;e++){let a=addElement("span",n,"emoji");a.innerHTML=t[Math.floor(Math.random()*t.length)],a.style.animationDelay=`.${e}s`,a.style.left=5*e+"vw",a.style.fontSize=getRandomNumber(1,2)+"rem",a.style.setProperty("--initial-bottom",getRandomNumber(-10,-47)+"vh")}},600),setTimeout(()=>{a.style.scale="0",l.style.fontSize="0rem",l.style.transition="all .4s",t.style.opacity="0",setTimeout(()=>{n.remove(),t.remove()},1e3)},3e3)}function getRandomNumber(e,t,n=!1){return n?Math.random()*(t-e+1)+e:Math.floor(Math.random()*(t-e+1))+e}function download(){JSON.stringify(listOfPlayers);var e="https://tarock-counter.web.app/"+encodeURIComponent("users/"+sessionStorage.uid+"/games/"+listOfPlayers["!gameName!"]);console.log(e);try{navigator.userAgent.includes("wv")?Android.share(e):navigator.share&&navigator.share({title:"Tarok igra",text:"Vabim te, da se pridružiš moji tarok skupini.",url:e}).then(()=>console.log("Success sharing")).catch(e=>console.log("Error sharing",e))}catch(e){}}function deleteAllData(){var e=dialogBuilder("Ali res želite izbrisati vse svoje podatke? Tega dejanja ni mogoče razveljaviti.",!1),t=e[0],n=e[1];let a=addElement("md-icon",t.parentNode,null);a.innerHTML="delete_outline",a.setAttribute("slot","icon"),n.addEventListener("click",function(e){document.getElementById("game").style.animation="none",hideDialog(t)});let l=document.createElement("div");l.setAttribute("slot","actions"),t.parentNode.appendChild(l);var i=document.createElement("md-text-button");i.innerHTML="Da";var o=document.createElement("md-filled-tonal-button");o.innerHTML="Ne",l.appendChild(i),l.appendChild(o),i.addEventListener("click",function(){deleteAllDataF(),hideDialog(t)}),o.addEventListener("click",function(){hideDialog(t)})}async function upload(){if(null!==sessionStorage.uid&&void 0!==sessionStorage.uid&&"null"!==sessionStorage.uid&&navigator.onLine)try{var e=decodeURIComponent(location.pathname.slice(1)),t=await loadDataPath(e);if(e.includes(sessionStorage.uid))dlgNotif("Ta skupina je vaša."),window.history.replaceState({},document.title,"/");else{var n=dialogBuilder("Ali se želite pridružiti skupini '"+t["!gameName!"]+"' z igralci "+JSON.stringify(Object.keys(t).filter(e=>"!gamesData!"!==e&&"!gameName!"!==e)).replace(/"/g,"").replace("[","").replace("]","").replace(/,/g,", ")+"?"),a=n[0],l=n[1];t["!gameName!"]=e,window.history.replaceState({},document.title,"/"),l.addEventListener("click",function(e){document.getElementById("game").style.animation="none",hideDialog(a)});let r=document.createElement("div");r.setAttribute("slot","actions"),a.parentNode.appendChild(r);var i=document.createElement("md-filled-tonal-button");i.innerHTML="Da";var o=document.createElement("md-text-button");o.innerHTML="Ne",r.appendChild(o),r.appendChild(i),i.addEventListener("click",function(){const e=JSON.parse(localStorage.getItem("games"))||{};e["/"+t["!gameName!"]]=t,localStorage.setItem("games",JSON.stringify(e)),updateUserData(),hideDialog(a)}),o.addEventListener("click",function(){hideDialog(a)})}}catch(e){console.log("Not right link")}else location.pathname.includes("public")||(dlgNotif("Za dostop do deljene skupine morate biti prijavljeni in imeti internetno povezavo."),window.history.replaceState({},document.title,"/"))}function hideElement(e){e.style.animation="hideScreen .2s forwards",setTimeout(()=>{e.remove()},200)}function changeOpis(e,t){"mainSheet"==e.className?e.parentNode.parentNode.querySelector("p").innerHTML=t:e.parentNode.querySelector('[slot="headline"]').getElementsByTagName("span")[0].innerHTML=t}function dialogBuilder(e,t){var n=document.createElement("md-dialog");n.setAttribute("open",""),n.getOpenAnimation&&(queryAnim?noDialogAnimations(n):dialogAnimations(n));var a=addElement("span",n,null);a.setAttribute("slot","headline"),a.setAttribute("class","dialog-headline"),a.innerHTML='<span style="flex: .83;">'+e+"</span>";var l=document.createElement("md-icon-button");if(!1!==t){l.setAttribute("value","close"),l.classList.add("iksRight"),l.innerHTML='<md-icon>close</md-icon><md-ripple for="touch" class="unbounded"></md-ripple>',a.appendChild(l);var i=addElement("md-icon-button",a,"iksRight");i.innerHTML="<md-icon>help</md-icon>",i.style.right="50px",i.addEventListener("click",function(){helpMe(n)})}var o=addElement("div",n,null);return o.setAttribute("style","display: flex;flex-wrap: wrap;justify-content: center;"),o.setAttribute("slot","content"),n.addEventListener("cancel",function(){hideDialog(o)}),document.body.appendChild(n),setTimeout(()=>{try{document.querySelector("body > md-dialog").shadowRoot.querySelector(".scrim").style.zIndex="3"}catch{}},3),o.setAttribute("method","dialog"),[o,l]}function Game(e){if(e)clickedUser(e.toString(),e.toString());else{var t=document.getElementById("dlgSlct");t.innerHTML="";var n=document.createElement("md-list"),a=document.createElement("md-list");a.style.marginBottom="30px",t.style.borderRadius="15px";const e=JSON.parse(localStorage.getItem("games"))||{};if(0==Object.keys(e).length){var l=document.createElement("p");l.innerHTML="Nimate še nobenih skupin.",t.appendChild(l)}else{for(var i=0;i<Object.keys(e).length;i++){let t=Object.keys(e)[i],l=t;if(t.includes("/users/")){if(t=t.slice(t.lastIndexOf("/")+1),"!gamesData!"!==t||"!gameName!"!==t){var o=addElement("md-list-item",null,null);if(o.setAttribute("type","button"),o.setAttribute("interactive",""),a.getElementsByTagName("md-list-item").length>0){let e=addElement("md-divider",a,null);e.setAttribute("style","height:5px;--md-divider-color: var(--md-sys-color-surface)")}o.innerHTML+=t,o.addEventListener("click",async function(){await clickedUser(t,l)});let e=addElement("md-icon-button",o,null);e.setAttribute("slot","end"),e.innerHTML="<md-icon >close</md-icon>",e.addEventListener("click",async function(){event.stopPropagation(),listOfPlayers=await loadDataPath(l),listOfPlayers["!gameName!"]=l,deleteGame()}),a.appendChild(o)}}else if("!gamesData!"!==t||"!gameName!"!==t){o=addElement("md-list-item",null,null);if(o.setAttribute("type","button"),o.setAttribute("interactive",""),n.getElementsByTagName("md-list-item").length>0){let e=addElement("md-divider",n,null);e.setAttribute("style","height:5px;--md-divider-color: var(--md-sys-color-surface)")}o.innerHTML+=t,o.addEventListener("click",async function(){await clickedUser(t,l)});let e=addElement("md-icon-button",o,null);e.setAttribute("slot","end"),e.innerHTML="<md-icon >delete</md-icon>",e.addEventListener("click",function(){event.stopPropagation(),listOfPlayers=JSON.parse(localStorage.games)[l.toString()],deleteGame()}),n.appendChild(o)}}var r=document.createElement("p"),s=document.createElement("p");0!==n.getElementsByTagName("md-list-item").length&&(s.innerHTML="Zasebne skupine",t.appendChild(s),t.appendChild(n)),0!==a.getElementsByTagName("md-list-item").length&&(r.innerHTML="Deljene skupine",t.appendChild(r),t.appendChild(a))}t.style.setProperty("--wipe-position","100%"),t.style.transform="translateY(0px)"}}function hideDialog(e){e.parentNode.close(),queryAnim?e.parentNode.remove():setTimeout(()=>{e.parentNode.remove()},150)}async function clickedUser(e,t){let n=decodeURIComponent(t);if(e!==n)if(navigator.onLine)try{listOfPlayers=await loadDataPath(n),listOfPlayers["!gameName!"]=n}catch{dlgNotif("Zgodila se je napaka. Skupina je bila verjetno izbrisana.");const e=JSON.parse(localStorage.getItem("games"))||{};delete e[n],localStorage.setItem("games",JSON.stringify(e)),updateUserData()}else dlgNotif("Brez internetne povezave ne morete dostopati do deljene skupine.");else{const t=JSON.parse(localStorage.getItem("games"))||{};listOfPlayers=t[e]}void 0!==listOfPlayers&&(listOfPlayers["!gamesData!"]||(listOfPlayers["!gamesData!"]=[]),getGenders(),listOfPlayers["!gameName!"].includes("/users/")?(updateSharedRemote(),count(!0)):count(!0)),"/public/"!==location.pathname&&window.history.pushState({},document.title,"/"+encodeURIComponent(listOfPlayers["!gameName!"]))}function dlgNotif(e,t="Napaka"){var n=addElement("md-text-button",null,null);n.innerHTML="Ok";var a=dialogBuilder(t,!1)[0];n.addEventListener("click",function(e){hideDialog(a)});let l=document.createElement("div");l.setAttribute("slot","actions"),a.parentNode.appendChild(l),l.appendChild(n),a.innerHTML=e}function undo(){listOfPlayersCopy.length>0&&(listOfPlayers=JSON.parse(listOfPlayersCopy[listOfPlayersCopy.length-1]),listOfPlayersCopy.pop(),count(!0)),0==listOfPlayersCopy.length&&(document.querySelector(".undoBtn").disabled=!0)}function newGame(){var e=makeBottomheet("Vpišite člane");listOfPlayers={};let t=1;var n=document.createElement("md-outlined-text-field"),a=document.createElement("md-text-button"),l=document.createElement("md-filled-tonal-button");a.setAttribute("id","addPlayer"),a.setAttribute("slot","content"),a.style.margin=l.style.margin="0",a.innerHTML="Dodaj igralca",n.style.marginBottom="10px",n.label="Ime",n.style.borderRadius="4px",n.setAttribute("slot","content"),l.innerHTML="Naprej",e.appendChild(n),n.focus();let i=addElement("div",e,"break");i.style.height="10px",e.appendChild(a),e.appendChild(l),a.addEventListener("click",function(){let n=addElement("md-outlined-text-field",e,null);n.style.borderRadius="4px",n.label="Ime",n.style.marginBottom="10px",e.insertBefore(n,i),n.focus,t++,5==t&&(a.disabled=!0)}),l.addEventListener("click",async function(){let t=!1;for(var n=0;n<document.getElementsByTagName("md-outlined-text-field").length;n++){let e=document.getElementsByTagName("md-outlined-text-field")[n];(0==e.value.length||e.value.includes("/"))&&(e.style.outline="7px red solid",setTimeout(()=>{e.style.outline="0px red solid"},200),t=!0)}if(!t){for(n=0;n<document.getElementsByTagName("md-outlined-text-field").length;n++){let e=document.getElementsByTagName("md-outlined-text-field")[n].value;listOfPlayers[e]=[""]}listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),e.innerHTML="",a.remove(),l.remove(),listOfPlayers["!gamesData!"]=[],changeOpis(e,"Vpišite vzdevek skupine");var i=document.createElement("md-filled-text-field"),o=document.createElement("md-filled-tonal-button");i.label="Vzdevek skupine",i.value=JSON.stringify(Object.keys(listOfPlayers).filter(e=>"!gamesData!"!==e)).replace(/"/g,"").replace("[","").replace("]","").split(",").sort().toString().replace(/,/g,", "),o.innerHTML="Končano",e.appendChild(i),addElement("div",e,"break").style.height="10px",e.appendChild(o),console.log(listOfPlayers),getGenders(),o.addEventListener("click",function(){0==i.value.length||i.value.includes("/")?(i.style.outline="7px red solid",setTimeout(()=>{i.style.outline="0px red solid"},200)):(listOfPlayers["!gameName!"]=i.value,navigator.onLine||(localStorage.offlineChanges=!0),document.querySelector(".bottomSheetScrim").click(),count(!1,!0))})}})}async function getGenders(){for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;const t=await fetch("https://pxweb.stat.si/SiStatData/api/v1/sl/Data/?query="+encodeURIComponent(e)),n=await t.json();"string"==typeof listOfPlayers[e]&&(listOfPlayers[e]=[listOfPlayers[e]]),JSON.stringify(n).includes("Ženska imena")?listOfPlayers[e][1]="Z":JSON.stringify(n).includes("Moška imena")?listOfPlayers[e][1]="M":listOfPlayers[e][1]="N"}}function loclStrg(){var e=prompt("Input"),t=JSON.parse(e.toString());for(const[e,n]of Object.entries(t))localStorage.setItem(e,n)}async function count(e,t=null){try{
e&&(document.querySelector(".cntScreen").style.animation="hideScreen var(--transDur) forwards cubic-bezier(.3,.5,0,1.3)",document.querySelector(".crezultLine").style.animation="hideScreen var(--transDur) forwards cubic-bezier(.3,.5,0,1.3)")}catch{}let n;n=e?30:0,await new Promise(e=>setTimeout(e,n)),listOfPlayers["!gamesData!"]||(listOfPlayers["!gamesData!"]=[]);try{removeElement(document.querySelector(".cntScreen"),document.querySelector(".crezultLine"))}catch(e){}setTimeout(()=>{let e=document.getElementsByTagName("md-dialog");for(let t=0;t<e.length;t++)e[t].remove()},300),listOfPlayersCopy.length>0&&(document.querySelector(".undoBtn").disabled=!1),listOfPlayers["!gameName!"].includes("/users/")?(document.querySelector(".shrBtn").disabled=!0,"yes"!==document.getElementById("clck").label&&(document.getElementById("clck").addEventListener("click",function(){dlgNotif("Da povabite nekoga v skupino morate biti njen lastnik.")}),document.getElementById("clck").label="yes"),document.querySelector(".dltBtn").innerHTML="<md-icon>insert_chart</md-icon>"):(document.querySelector(".shrBtn").disabled=!1,document.querySelector(".dltBtn").innerHTML="<md-icon>insert_chart</md-icon>"),null!=sessionStorage.uid&&null!=sessionStorage.uid&&"null"!=sessionStorage.uid&&"undefined"!=sessionStorage.uid&&navigator.onLine||("yes"!==document.getElementById("clck").label&&(document.getElementById("clck").addEventListener("click",function(){dlgNotif("Da povabite nekoga v skupino morate biti prijavljeni in imeti internetno povezavo.")}),document.getElementById("clck").label="yes"),document.querySelector(".shrBtn").disabled=!0),document.getElementById("actionBar").style.display="flex",document.getElementById("homeContainer").style.display="none";const a=JSON.parse(localStorage.getItem("games"))||{};a[listOfPlayers["!gameName!"]]=listOfPlayers,localStorage.setItem("games",JSON.stringify(a)),updateUserData(),localStorage.removeItem(void 0);var l=addElement("div",document.body,"cntScreen");l.id="cntScreen",e&&(l.style.animation="showScreenGame var(--transDur) forwards cubic-bezier(0.05, 0.7, 0.1, 1.0)");var i=document.createElement("div");i.id="crezultLine";for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;let t=e;var o=document.createElement("div"),r=document.createElement("div");if(!Array.isArray(listOfPlayers[e])){const t=new Set([listOfPlayers[e]]);listOfPlayers[e][0]=Array.from(t)}r.innerHTML='<p class="namePlayers"> '+listOfPlayers[e][0].toString()+"<br>"+t+" </p>",o.innerHTML=String(o.innerHTML).replace("undefined",""),o.innerHTML+='<p style = "" class="noText" ></p>',o.innerHTML+=' <p style = "" class="noText" ></p>',o.setAttribute("class","chl chlName_"+t.replace(/ /g,"_"));let n=addElement("md-ripple",r,null);n.style.zIndex="10",o.style.display="inline-block;";var s=addElement("p",i,null);s.setAttribute("class","rezult_"+t.replace(/ /g,"_")),s.setAttribute("style","flex: 1; color: var(--_label-text-color); background-color:var(--md-sys-color-secondary-container); padding-top: 15px; padding-bottom: 15px; border-top-left-radius: 30px; border-top-right-radius: 30px; margin-left:10px;margin-right:10px;"),s.innerHTML="",r.setAttribute("class","prnt prntName_"+t.replace(/ /g,"_")),r.addEventListener("click",function(){event.target.className.includes("word")||addScore(t)}),r.appendChild(o),l.appendChild(r)}var d=0;let c={};document.body.appendChild(l);for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(c[e]=parseInt(0));listOfPlayers["!gamesData!"]||(listOfPlayers["!gamesData!"]=[]);for(var m=0;m<listOfPlayers["!gamesData!"].length;m++){let e=m;if(!listOfPlayers["!gamesData!"][e])continue;let t=listOfPlayers["!gamesData!"][e][1],n=listOfPlayers["!gamesData!"][e][3];if(!Array.isArray(t)){const e=new Set([t]);t=Array.from(e)}if(!Array.isArray(n)){const e=new Set([n]);n=Array.from(e),n.push(n[0])}for(const a of t){let l=n[t.indexOf(a)];var u=document.createElement("md-text-button");if(""!==l&&(listOfPlayers["!gamesData!"][e][9]&&(l=2*(games[listOfPlayers["!gamesData!"][e][0]][0]+listOfPlayers["!gamesData!"][e][5])+listOfPlayers["!gamesData!"][e][8],u.innerHTML=parseInt(l)),listOfPlayers["!gamesData!"][e][10]&&(l=4*(games[listOfPlayers["!gamesData!"][e][0]][0]+listOfPlayers["!gamesData!"][e][5])+listOfPlayers["!gamesData!"][e][8],u.innerHTML=parseInt(l)),listOfPlayers["!gamesData!"][e][4]?(l=2*parseInt(l),u.innerHTML=parseInt(l)):u.innerHTML=parseInt(l)),document.querySelector(".chlName_"+a.replace(/ /g,"_")).appendChild(u),u.style.marginTop="2px",u.style.marginBottom="2px",u.style.fontSize="1rem",!Array.isArray(listOfPlayers["!gamesData!"][e][1])){const t=new Set([listOfPlayers["!gamesData!"][e][1]]);listOfPlayers["!gamesData!"][e][1]=Array.from(t)}listOfPlayers["!gamesData!"][e][4]&&listOfPlayers["!gamesData!"][e][1][0]==a&&(u.innerHTML=u.innerHTML+"*"),u.classList.add(a+"_score"),u.classList.add("score_"+d),""!==l&&(c[a]=c[a]+parseInt(l)),"&bbsp;"!==u.innerHTML&&u.addEventListener("click",function(){event.stopPropagation(),gameData(event.target.getAttribute("class").slice(event.target.getAttribute("class").lastIndexOf("_")+1),d)}),""==l&&(u.innerHTML="&nbsp;"),addElement("div",document.querySelector(".chlName_"+a.replace(/ /g,"_")),"break")}for(const e in listOfPlayers)if(!t.includes(e)&&"!gamesData!"!=e&&"!gameName!"!=e){u=document.createElement("md-text-button");u.style.marginTop="2px",u.style.marginBottom="2px",u.style.fontSize="1rem",u.innerHTML="&nbsp;",document.querySelector(".chlName_"+e.replace(/ /g,"_")).appendChild(u),u.disabled=!0,u.classList.add("noText"),addElement("div",document.querySelector(".chlName_"+e.replace(/ /g,"_")),"break")}d++}let g=document.querySelectorAll(".namePlayers"),p=[...g].reduce((e,t)=>Math.max(e,t.clientHeight),0);g.forEach(e=>{e.style.height=p+"px"});try{const e=document.querySelectorAll(".chl");function y(t){const n=t.target.scrollTop;e.forEach(e=>{e.scrollTop=n})}e.forEach(e=>{e.addEventListener("scroll",y)})}catch(e){}i.setAttribute("class","crezultLine"),document.getElementById("bottomBar").appendChild(i),e&&(document.querySelector(".crezultLine").style.animation="showScreen var(--transDur) forwards cubic-bezier(0.3, 0.5, 0, 1.3)");for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(document.querySelector(".rezult_"+e.replace(/ /g,"_")).innerHTML=c[e]);if(e)setTimeout(()=>{var e=$(".chl");e.animate({scrollTop:[e.prop("scrollHeight"),"swing"]},{duration:e.prop("scrollHeight")/2,easing:"swing"})},1);else{var f=document.getElementsByClassName("chl")[0];f.scrollTo(0,f.scrollHeight+100)}}function addElement(e,t,n){var a=document.createElement(e);return n&&a.classList.add(n),t&&t.appendChild(a),a}function gameData(e,t){function n(e,t,n){let a=addElement("tr",r,"gameTdDiv");"Točke"==n&&(a.style.transform=" translateY(10px)",e=""+e.toString().replace("+",""));let l=addElement("td",a,"gameDataTd");l.innerHTML=t;let i=addElement("td",a,"gameDataTdBottom");i.innerHTML=e}var a=listOfPlayers["!gamesData!"][parseInt(e)];console.log(a);var l=dialogBuilder("Igra",!1),i=l[0];if("Po meri"!==a[0]&&"Klop"!==a[0]){var o=document.createElement("md-outlined-text-field");o.type="number",a[4]?o.value=2*a[3]:o.value=a[3],o.label="Točke",i.appendChild(o)}var r=addElement("table",null,"gameData"),s=["Igra","Igralec","Partner","Točke","Radlc","Razlika","Uspeh","Bonusi","Bonus Točke","Kontra","Rekontra","Datum"];r.style.marginBottom="10px";for(let e=0;e<s.length;e++){var d=s[e];let t=a[e];completePodatki[d]=0==e&&"Po Meri"!==t?[e,t,games[t.toString()][0]]:[e,t]}if(console.log(completePodatki),completePodatki.Datum[1]){var c=new Date(completePodatki.Datum[1]),m=c.toLocaleString("sl-Si",{weekday:"long"})+", "+c.getDate()+". "+c.toLocaleString("sl-Si",{month:"long"})+" "+c.getFullYear()+", ob "+c.getHours()+"."+c.getMinutes();changeOpis(i,m)}let u,g,p;if(p="Igra",u=p,g=completePodatki[p][1],u=p+" "+completePodatki[p][1].toLowerCase(),u.toLowerCase().includes("po meri")||u.toLowerCase().includes("klop")||u.toLowerCase().includes("renons")||u.toLowerCase().includes("mondfang")){g=0,u.includes("po meri")?n("","Po meri"):u.includes("klop")?n("","Klop"):u.includes("mondfang")?n("","Mondfang"):n("","Renons"),"string"==typeof completePodatki.Igralec[1]&&(completePodatki.Igralec[1]=completePodatki.Igralec[1].split(",")),"number"==typeof completePodatki["Točke"][1]&&(completePodatki["Točke"][1]=completePodatki["Točke"][1].toString().split(","));for(let e=0;e<completePodatki.Igralec[1].length;e++){const t=completePodatki.Igralec[1][e];completePodatki.Radlc[1]&&!u.includes("mondfang")?n(2*completePodatki["Točke"][1][e],t):n(completePodatki["Točke"][1][e],t)}}else g=completePodatki[p][2],a[6]||(g="-"+g),n(g,u,p);completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||void 0===completePodatki.Razlika[1]||!1===completePodatki.Razlika[1]||null===completePodatki.Razlika[1]||(p="Razlika",u=p,g=completePodatki[p][1],a[6]||(g="-"+g),n(g,u,p));try{completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||completePodatki.Igra[1].toLowerCase().includes("mondfang")||!completePodatki.Kontra[1]||(p="Kontra",u=p,completePodatki.Kontra[1]&&(g=completePodatki.Igra[2]+completePodatki.Razlika[1]),!1!==g&&n(g,u,p))}catch{}try{completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||completePodatki.Igra[1].toLowerCase().includes("mondfang")||!completePodatki.Rekontra[1]||(p="Rekontra",u=p,completePodatki.Rekontra[1]&&(g=completePodatki.Igra[2]+completePodatki.Razlika[1]),!1!==g&&n(g,u,p))}catch{}if(!completePodatki.Igra[1].toLowerCase().includes("po meri")&&!completePodatki.Igra[1].toLowerCase().includes("klop"))if(p="Bonus Točke",u=p,g=completePodatki[p][1],"Bonus Točke"==p){let e=completePodatki.Bonusi[1],t={Kralji:20,Trula:20,"Pagat ultimo":50,"Kralj ultimo":20};for(const a in completePodatki.Bonusi[1])e[a][1]?e[a][3]?n(e[a][0],"Napovedano in kontrirano: <wbr>"+a,p):e[a][4]?n(e[a][0],"Napovedano in rekontrirano: <wbr>"+a,p):n(t[a],"Napovedano: <wbr>"+a,p):n(e[a][0],a,p)}else a[6]||g.toString().includes("-")||(g="-"+g),n(g,u,p);completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||(p="Radlc",u=p,g=completePodatki[p][1],completePodatki.Radlc[1]&&(g=completePodatki["Točke"][1],completePodatki.Kontra[1]&&(g=2*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1]),completePodatki.Rekontra[1]&&(g=4*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1])),!1!==g&&n(g,u,p)),completePodatki.Igra[1].toLowerCase().includes("po meri")||completePodatki.Igra[1].toLowerCase().includes("klop")||(p="Točke",u=p,g=completePodatki[p][1],completePodatki.Kontra[1]&&(g=2*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1]),completePodatki.Rekontra[1]&&(g=4*(completePodatki.Igra[2]+completePodatki.Razlika[1])+completePodatki["Bonus Točke"][1]),completePodatki.Radlc[1]&&(g*=2),n(g,u,p)),i.appendChild(r),addElement("div",i,"break");var y=addElement("span",i.parentNode,null);y.setAttribute("slot","actions");var f=document.createElement("md-text-button");f.innerHTML=' <svg slot="icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg> Izbriši',y.appendChild(f),f.style.margin="0",f.addEventListener("click",function(t){if(listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers["!gamesData!"].splice(e,1),!Array.isArray(completePodatki.Igralec[1])){const e=new Set([completePodatki.Igralec[1]]);completePodatki.Igralec[1]=Array.from(e)}if(!0===completePodatki.Radlc[1]&&completePodatki["Točke"][1]>-1){if(!Array.isArray(listOfPlayers[completePodatki.Igralec[1][0]])){const e=new Set([listOfPlayers[completePodatki.Igralec[1][0]]]);listOfPlayers[completePodatki.Igralec[1][0]]=Array.from(e)}listOfPlayers[completePodatki.Igralec[1][0]][0]=listOfPlayers[completePodatki.Igralec[1][0]][0]+"*"}const n=Object.keys(listOfPlayers["!gamesData!"]);n.sort((e,t)=>e-t);const a=JSON.parse(localStorage.getItem("games"))||{};a[listOfPlayers["!gameName!"]]=listOfPlayers,localStorage.setItem("games",JSON.stringify(a)),updateUserData(),hideDialog(i),count(!0)});var h=document.createElement("md-filled-tonal-button");h.innerHTML="Končano",h.style.margin="0",y.appendChild(h),h.addEventListener("click",function(t){hideDialog(i),"Po Meri"!==a[0]&&"Klop"!==a[0]&&listOfPlayers["!gamesData!"][e][3]!==o.value&&(listOfPlayersCopy.push(JSON.stringify(listOfPlayers)),a[4]?listOfPlayers["!gamesData!"][e][3]=o.value/2:listOfPlayers["!gamesData!"][e][3]=o.value,removeElement(document.querySelector(".cntScreen"),document.querySelector(".crezultLine")),count(!0))})}function deleteGame(e){var t;t=e||(listOfPlayers["!gameName!"].includes("/users/")?dialogBuilder("Ali želite zapustiti deljeno skupino "+listOfPlayers["!gameName!"].slice(listOfPlayers["!gameName!"].lastIndexOf("/"))+"?",!1)[0]:dialogBuilder("Ali želite izbrisati skupino "+listOfPlayers["!gameName!"]+"?",!1)[0]);let n=addElement("md-icon",t.parentNode,null);n.innerHTML="delete_outline",n.setAttribute("slot","icon");var a=document.createElement("md-text-button");a.innerHTML="Da";var l=document.createElement("md-filled-tonal-button");l.innerHTML="Ne";let i=document.createElement("div");i.setAttribute("slot","actions"),t.parentNode.appendChild(i),i.appendChild(a),i.appendChild(l),a.addEventListener("click",function(){navigator.onLine||(localStorage.offlineChanges=!0);const e=JSON.parse(localStorage.getItem("games"))||{};delete e[listOfPlayers["!gameName!"]],navigator.onLine||(localStorage.offlineChanges=!0),listOfPlayers=[],localStorage.setItem("games",JSON.stringify(e)),updateUserData(),document.querySelector(".homeBtn").click(),hideDialog(t),Game()}),l.addEventListener("click",function(){listOfPlayers=[],hideDialog(t)})}async function resolveAfter(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}function removeElement(){for(const e of arguments)e.remove()}function privacy(){var e=dialogBuilder("Politika"),t=e[0],n=e[1];t.parentNode.classList.add("fullscreen"),n.addEventListener("click",function(e){$("#homeContainer").show(),setTimeout(()=>{hideDialog(t),document.getElementById("homeContainer").style.animation=""},1)});try{dlgFullscreen(t.parentNode)}catch{}var a=addElement("p",t,null);a.setAttribute("style","white-space: pre;text-wrap: wrap;width: 80%;margin: 20px;color: var(--colorTxtDialog);"),a.innerHTML=policyTxt}function feedback(){var e=dialogBuilder("Povratne informacije"),t=e[0],n=e[1];n.addEventListener("click",function(e){document.getElementById("game").style.animation="none",hideDialog(t)});var a=document.createElement("md-outlined-text-field");a.setAttribute("type","textarea"),a.setAttribute("rows","10"),a.setAttribute("style","height: 25vh;width: 90%; resize: vertical;word-wrap: break-word;"),a.label="Vpišite kaj bi radi izboljšali...",a.placeholder="Kar po domače...",t.appendChild(a),a.focus();let l=document.createElement("div");l.setAttribute("slot","actions"),t.parentNode.appendChild(l);var i=document.createElement("md-filled-tonal-button");i.innerHTML="Pošlji",l.appendChild(i),i.addEventListener("click",function(){window.open("mailto:stevec.taroka@gmail.com?subject=Imam izbolšavo&body="+a.value,"_blank")})}function settings(){var e=dialogBuilder("Nastavitve"),t=e[0],n=e[1];t.parentNode.classList.add("fullscreen"),n.addEventListener("click",function(e){document.getElementById("game").style.animation="none",document.getElementById("homeContainer").style.animation="none",$("#homeContainer").show(),setTimeout(()=>{hideDialog(t),document.getElementById("homeContainer").style.animation=""},1)}),dlgFullscreen(t.parentNode);var a=addElement("md-list",t,null),l=addElement("md-list-item",a,null);l.setAttribute("style","display: flex;align-items: center;"),l.innerHTML="Zaokroževanje razlike&nbsp;&nbsp;&nbsp;&nbsp;";var i=addElement("md-switch",l,null);i.setAttribute("slot","end"),1!=JSON.parse(localStorage.getItem("razlikaOkrozi"))&&null!=localStorage.getItem("razlikaOkrozi")||i.setAttribute("selected",""),l.addEventListener("click",function(){i.selected=!i.selected}),l.setAttribute("type","reset"),l.addEventListener("change",function(){"true"==localStorage.getItem("razlikaOkrozi")||null==localStorage.getItem("razlikaOkrozi")?localStorage.setItem("razlikaOkrozi","false"):localStorage.setItem("razlikaOkrozi","true"),zaokrožuj=JSON.parse(localStorage.getItem("razlikaOkrozi"))});var o=makeThemeChanger();a.appendChild(o);var r=addElement("md-text-button",a);r.innerHTML="Politika <md-icon slot='icon'>policy</md-icon>",r.addEventListener("click",privacy),r.setAttribute("style","margin-top: 10px;");var s=addElement("md-filled-button",a);s.innerHTML="Izbriši račun <md-icon slot='icon' style='color:var(--md-sys-color-on-error-container)'>delete</md-icon>",s.addEventListener("click",deleteAllData),s.setAttribute("style","margin-top: 10px;--_container-color: var(--md-sys-color-error-container);--_label-text-color:var(--md-sys-color-on-error-container);")}function makeThemeChanger(){const e=localStorage["seed-color"]||"267,100";let t=e.split(",");var n=addElement("md-filled-card",null,"hueCard");addElement("p",n,"colorTitle").innerHTML="Barva aplikacije";let a=addElement("md-slider",n,"colorGradient");a.classList.add("sliderStyle"),a.max="360",a.value=t[0];let l=addElement("div",n,null);l.style.height="15px",l.style.width="3px",addElement("p",n,"colorTitle").innerHTML="Nasičenost";let i=addElement("md-slider",n,"sliderStyle");i.value=t[1],a.addEventListener("input",function(){localStorage["seed-color"]=a.value+","+i.value,i.style.setProperty("--_active-track-color",changeTheme(a.value,i.value)),i.style.setProperty("--_inactive-track-color",changeTheme(a.value,i.value))}),i.style.setProperty("--_active-track-color",changeTheme(a.value,i.value)),i.style.setProperty("--_inactive-track-color",changeTheme(a.value,i.value)),i.addEventListener("input",function(){localStorage["seed-color"]=a.value+","+i.value,changeTheme(a.value,i.value)});let o=addElement("div",n,null);o.style.height="15px",o.style.width="3px",addElement("p",n,"colorTitle").innerHTML="Tema";let r=addElement("md-outlined-segmented-button-set",n,"noShowScreen"),s=addElement("md-outlined-segmented-button",r,null),d=addElement("md-outlined-segmented-button",r,null),c=addElement("md-outlined-segmented-button",r,null),m=addElement("md-icon",s,null),u=addElement("md-icon",d,null),g=addElement("md-icon",c,null);return m.setAttribute("slot","icon"),u.setAttribute("slot","icon"),g.setAttribute("slot","icon"),m.innerHTML="light_mode",u.innerHTML="brightness_medium",g.innerHTML="dark_mode",s.addEventListener("click",function(){localStorage.mode="light",changeTheme(a.value,i.value)}),c.addEventListener("click",function(){localStorage.mode="dark",changeTheme(a.value,i.value)}),d.addEventListener("click",function(){localStorage.mode="sys",changeTheme(a.value,i.value)}),"dark"==localStorage.mode?c.selected=!0:"light"==localStorage.mode?s.selected=!0:"sys"==localStorage.mode&&(d.selected=!0),n}function helpMe(e){if(!document.getElementById("pomoc")){var t=dialogBuilder("Pomoč"),n=t[0],a=t[1];n.parentNode.classList.add("fullscreen"),a.addEventListener("click",function(t){e?(document.getElementById("game").style.animation="none",setTimeout(()=>{hideDialog(n)},1)):(document.getElementById("game").style.animation="none",document.getElementById("homeContainer").style.animation="none",document.getElementById("homeContainer").style.display="block",setTimeout(()=>{hideDialog(n),document.getElementById("homeContainer").style.animation=""},1))}),dlgFullscreen(n.parentNode,e),n.innerHTML=pomoc;var l=document.getElementById("pomoc").getElementsByTagName("md-list-item");for(const e of l)e.addEventListener("click",function(){"0px"==e.getElementsByTagName("p")[0].style.height?(expandSection(e.getElementsByTagName("p")[0]),e.getElementsByTagName("md-icon")[0].innerHTML="expand_less"):(collapseSection(e.getElementsByTagName("p")[0]),e.getElementsByTagName("md-icon")[0].innerHTML="expand_more")})}}function collapseSection(e){var t=e.scrollHeight,n=e.style.transition;e.style.transition="",requestAnimationFrame(function(){e.style.height=t+"px",e.style.transition=n,requestAnimationFrame(function(){e.style.height="0px"})}),e.setAttribute("data-collapsed","true")}function expandSection(e){var t=e.scrollHeight;e.style.height=t+"px",e.addEventListener("transitionend",function(t){e.removeEventListener("transitionend",arguments.callee),e.style.height=null}),e.setAttribute("data-collapsed","false")}function makeBottomheet(e){let t=addElement("div",document.body,"bottomSheet"),n=addElement("div",t,"sheetContents"),a=addElement("div",t,"handleHolder");var l;""!==e&&(l=addElement("div",a,"bottomSheetTitle"),l.innerHTML='<p style="margin:0;">'+e+"</p>",addElement("md-elevation",l),l.style.margin="-"+(l.offsetHeight+34)+"px");addElement("div",a,"bottomSheetHandle");let i=addElement("div",document.body,"bottomSheetScrim");setTimeout(()=>{i.style.opacity=".32"},10),i.addEventListener("click",function(){o=0,y()});let o,r=document.querySelector('meta[name="theme-color"]').getAttribute("content");const s=e=>{o=Math.max(0,Math.min(100,e)),n.style.height=`${o}dvh`,100===o?(t.classList.add("fullscreenSheet"),n.innerHTML.includes("makAnmFrSht")||document.querySelector('meta[name="theme-color"]').setAttribute("content",getComputedStyle(document.body).getPropertyValue("--md-sys-color-surface-container"))):(t.classList.remove("fullscreenSheet"),document.querySelector('meta[name="theme-color"]').setAttribute("content",r))};s(0);const d=e=>e.touches?e.touches[0]:e;let c;const m=e=>{c=d(e).pageY,n.classList.add("not-selectable"),u=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)};var u=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),g=0;window.onmousedown=function(){++g},window.onmouseup=function(){--g};const p=a=>{if(g||"touchmove"==a.type){const g=d(a).pageY;var r=c-g;h.innerHTML.includes("md-list")&&n.scrollHeight>n.clientHeight&&o>75&&(r=0),h.innerHTML.includes("md-list")&&n.scrollHeight>n.clientHeight&&0!==n.scrollTop&&(r=0),h.innerHTML.includes("md-list")&&n.scrollHeight>n.clientHeight&&r<0&&(n.scrollTop=0);const p=r/window.innerHeight*100;var m;s(o+p),o>(u-52)/u*100?l.classList.add("titleFull"):l.classList.remove("titleFull");const y=Math.min(h.clientHeight,h.scrollHeight);m=y/u*100,o<m/2&&!h.innerHTML.includes("md-list")||h.innerHTML.includes("md-list")&&o<25?(""!==e&&(l.style.transform="scale(1,0)"),t.classList.add("escapingSheet"),i.style.opacity="0"):(""!==e&&(l.style.transform="scale(1)"),t.classList.remove("escapingSheet"),i.style.opacity=".32"),c=g}},y=()=>{setTimeout(()=>{var e;c=void 0,n.classList.remove("not-selectable");const t=Math.min(h.clientHeight,h.scrollHeight);e=t/u*100,h.innerHTML.includes("md-list")?o>95?s(100):o>25?s(Math.min(e+5,75)):(f(!1),s(0)):o<e/2?(f(!1),s(0)):s(o>e+(100-e)/2?100:Math.max(Math.min(e+5,75),25)),o>(u-26)/u*100?l.classList.add("titleFull"):l.classList.remove("titleFull")},6)},f=n=>{t.setAttribute("aria-hidden",String(!n)),i.style.opacity="0",""!==e&&(l.style.transform="scale(1,0)"),t.addEventListener("transitionend",function(e){t.remove(),i.remove()},!1)};window.addEventListener("mousedown",m),window.addEventListener("touchstart",m),window.addEventListener("mousemove",p),window.addEventListener("touchmove",p),window.addEventListener("mouseup",y),window.addEventListener("touchend",y);let h=addElement("main",n,"mainSheet");s(Math.min(n.offsetHeight,50,720/window.innerHeight*100));const v=new MutationObserver(e=>e.forEach(e=>{"childList"===e.type&&o<100&&(setTimeout(()=>{const e=Math.min(h.clientHeight,h.scrollHeight),t=e/u*100;h.innerHTML.includes("makAnmFrSht")?s(100):s(Math.max(Math.min(t+5,75),25)),o>(u-52)/u*100?l.classList.add("titleFull"):l.classList.remove("titleFull"),l.style.margin="-"+(l.offsetHeight+34)+"px"},10),h.innerHTML.includes("md-list")&&n.scrollHeight>n.clientHeight&&(n.style.overflow="scroll",n.style.display="block"))}));return v.observe(h,{childList:!0}),h}function pravila(){var e=dialogBuilder("Pravila"),t=e[0],n=e[1];t.parentNode.classList.add("fullscreen"),n.addEventListener("click",function(e){$("#homeContainer").show(),setTimeout(()=>{hideDialog(t),document.getElementById("homeContainer").style.animation=""},1)});try{dlgFullscreen(t.parentNode)}catch{}t.innerHTML=pravilaText}function statistika(){function e(e,t,n,a){const l=t/e*100,i=(1-e/a)/.5*10,o=n/e*100,r=l-i-o;return Math.round(r)}function t(e,t){let n=addElement("md-item",u,"stat-item");n.innerHTML='<p class="titleTxt" slot="trailing-supporting-text">'+e+'</p><table style="width: 100%;margin-top:30px;">'+t+"</table>"}function n(e,t,n){const a=Object.keys(e).sort((n,a)=>e[a][t]-e[n][t]);var l;return l=a.map(n=>`<tr style="margin-bottom: -10px "><td>${n}</td><td style='text-align: center'>${e[n][t]}</td></tr>`),l.join("")}var a=dialogBuilder("Statistika - "+listOfPlayers["!gameName!"].slice(listOfPlayers["!gameName!"].lastIndexOf("/")+1)),l=a[0],i=a[1];l.parentNode.classList.add("fullscreen"),dlgFullscreen(l.parentNode),i.addEventListener("click",function(e){hideDialog(l)});let o=addElement("md-list",l,"stat-list"),r=0,s=[],d={};var c={};let m=["Klop","Renons","Mondfang","Po Meri"];for(const e in listOfPlayers){if("!gamesData!"==e||"!gameName!"==e)continue;c[e]={},c[e].steviloIgranih=0,c[e].steviloSlepanih=0,c[e].steviloZmag=0,c[e].steviloIzgub=0,c[e].seznamTock=[],s.push(parseInt(document.querySelector(".rezult_"+e).innerHTML)),d[s.at(-1)]=e;let t=document.querySelectorAll("."+e+"_score");for(const n of t)c[e].seznamTock.push(n.innerHTML)}s.sort((e,t)=>t-e);let u=addElement("div",l,"flexer");for(const e in s){let e=addElement("md-list-item",o,"stat-item");e.innerHTML="<span style='font-weight: bold;font-size: larger' slot='start' >"+parseInt(r+1)+".</span>"+d[s[r]]+" ("+s[r]+")",r++}t("ŠTEVILO VSEH IGER",'<tr style="margin-bottom: -10px;font-size:2rem;text-align:center; "><td>'+listOfPlayers["!gamesData!"].length+"</td></tr>");for(const e of listOfPlayers["!gamesData!"])m.includes(e[0])||(c[e[1][0]].steviloIgranih+=1,e[6]?c[e[1][0]].steviloZmag+=1:c[e[1][0]].steviloIzgub+=1,2==e[1].length&&(c[e[1][1]].steviloSlepanih+=1));for(const e in listOfPlayers)"!gamesData!"!=e&&"!gameName!"!=e&&(c[e].odstotekZmag=Math.round(c[e].steviloZmag/c[e].steviloIgranih*100),c[e].odstotekIzgub=Math.round(c[e].steviloIzgub/c[e].steviloIgranih*100));for(const t in listOfPlayers){if("!gamesData!"==t||"!gameName!"==t)continue;const n=e(c[t].steviloIgranih,c[t].steviloZmag,c[t].steviloIzgub,listOfPlayers["!gamesData!"].length);c[t].steviloProcentov=n}let g=n(c,"steviloIgranih");t("NAJVEČ ODIGRANIG IGER",g);let p=n(c,"steviloSlepanih");t("NAJVEČKRAT KLICANI IGRALCI",p);let y=n(c,"steviloZmag","odstotekZmag");t("ZMAGE",y);let f=n(c,"steviloIzgub","odstotekIzgub");t("PORAZI",f);let h=n(c,"steviloProcentov");t("POVPREČJE (RATING)",h)}var games={Tri:[10,!0,"",!0,"3"],Dve:[20,!0,"",!0,"2"],Ena:[30,!0,"",!0,"1"],"Solo tri":[40,!0,"",!1,"S3"],"Solo dve":[50,!0,"",!1,"S2"],"Solo ena":[60,!0,"",!1,"S1"],"Solo brez":[80,!1,"",!1,"SB"],Valat:[250,!1,"",!0,"V"],"Barvni Valat":[125,!1,"",!0,"BV"],"Berač":[70,!1,"",!1,"B"],"Odprti Berač":[90,!1,"",!1,"OB"],Klop:["",!1,"",!0,"K"],Renons:[0,!1,"",!0,"R"],Mondfang:[-21,!1,"",!1,"M"],"Po meri":[0,!1,"",!0,"+"],"Uredi radlce":["",!1,"",!0,"*"]},zaokrožuj=JSON.parse(localStorage.getItem("razlikaOkrozi"));null!=zaokrožuj&&null!=zaokrožuj||(zaokrožuj=!0);var listOfPlayers={},listOfPlayersCopy=[],completePodatki={},isLoaded=!1;setTimeout(()=>{isLoaded||(document.querySelector(".loaderInner").style.opacity="1")},500);var queryAnim=!1;window.addEventListener("load",function(){isLoaded=!0,queryAnim=window.matchMedia("(prefers-reduced-motion: reduce)").matches;try{document.querySelector(".loader").style.opacity="0",setTimeout(()=>{document.querySelector(".loader").remove()},400)}catch{}location.pathname.includes("users")||"/"===location.pathname||location.pathname.includes("privacy")||Game(decodeURIComponent(location.pathname.slice(1))),location.pathname.includes("privacy")&&privacy(),null==localStorage.offlineChanges||navigator.onLine&&(updateUserData(),localStorage.offlineChanges=void 0),null!==sessionStorage.uid&&void 0!==sessionStorage.uid&&"null"!==sessionStorage.uid&&"undefined"!==sessionStorage.uid&&watchChanges(),queryAnim&&document.body.style.setProperty("--transDur","0s")})
;const pomoc='<div id="pomoc"> <md-list>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako ustvariti novo skupino?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size:1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Za ustvarjanje nove skupine na domačem zaslonu kliknite na gumb \'Nova skupina\'.<br><br>Po kliku se bo odprlo okno, v katerem lahko vnesete imena igralcev, ki sodelujejo v skupini. Za dodajanje večih igralcev uporabite gumb \'Dodaj igralca\'. Po kliku gumba \'Naprej\' vnesite še vzdevek skupine in kliknite  \'Končano\'.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako dodati novo igro na seznam?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Če želite dodati novo igro, na zaslonu za štetje kliknite na igralca, ki jo je igral. Nato sledite navodilom, da boste uspešno dodali novo igro na seznam.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako spremeniti barvno temo?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Za spreminjanje barvne teme aplikacije na domačem zaslonu kliknite na gumb \'Nastavitve\', zatem pa gumb \'Tema aplikacije\' in izberite barvo, ki vam je všeč.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Zakaj Google prijava?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size:1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Prijava s storitvijo Google vam omogoča enostavno shranjevanje podatkov v oblaku. To pomeni, da lahko na katerikoli napravi, kjer se prijavite s svojim Google računom, dostopate do svojih iger in jih urejate. <br><br>Google prijava vam omogoča tudi deljenje igre s prijatelji.</p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kaj pomenijo gumbi v spodnjem delu zaslona za štetje?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>● <md-icon>home</md-icon> vam omogoča, da se vrnete na domači zaslon.<br><br>● <md-icon>undo</md-icon> vam omogoča, da razveljavite zadnje dejanje na seznamu.<br><br>● <md-icon>person_add</md-icon> vam omogoča, da povabite prijatelje v skupino, kjer bodo imeli tudi oni možnost urejanja.<br><br>● <md-icon>delete</md-icon> vam omogoča, da izbrišete celotno igro. </p>\n</md-list-item>\n<md-list-item type="button"><b style="font-size: 1.2rem;margin-bottom:5px">Kako povabiti prijatelje v skupino?</b> <md-icon slot="end">expand_more</md-icon>\n    <p style="font-size: 1rem;margin:0px;transition: all var(--transDur) ease-in-out;height:0px;"><br>Če želite povabiti prijatelje v skupino, kliknite na tretji gumb v spodnjem delu zaslona <md-icon>person_add</md-icon>. Odpre se vam okno, kjer lahko kopirate ali delite povezavo do igre.<br><br>Ko prijatelj dobi povezavo, jo mora le odpreti.<br><br>Za dodajanje prijateljev v skupino morate biti prijavljeni in imeti internetno povezavo.</p>\n</md-list-item>\n</md-list><div class="break" style="height:80px;"></div></div>',registerServiceWorker=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});e.installing?console.log("Service worker installing"):e.waiting?console.log("Service worker installed"):e.active&&(console.log("Service worker active"),e.update())}catch(e){console.error(`Registration failed with ${e}`)}};registerServiceWorker(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{let t=localStorage["seed-color"].split(",");changeTheme(t[0],t[1])}),window.addEventListener("popstate",function(e){console.log("BACK"),"/"==location.pathname&&document.querySelector(".homeBtn").click()}),window.addEventListener("load",async function(){function e(){a=!0,t=null,n.style.display="none"}let t=null;const n=document.querySelector("#pwa");let a=!1;window.addEventListener("appinstalled",()=>{e(),console.log("app installed")}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),t=e,n.style.display="flex",document.querySelector(".bubble").style.visibility="visible"}),window.matchMedia("(display-mode: standalone)").matches&&(e(),console.log("app standalone")),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(a||(n.style.display="flex"));var l=[];try{l=await navigator.getInstalledRelatedApps(),0===l.length||a||(n.innerHTML="<md-icon>open_in_new</md-icon>",n.style.display="flex")}catch{}n.addEventListener("click",async()=>{if(0===l.length)if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){let e=dialogBuilder("iOS Aplikacija")[0];e.innerHTML='Če želite naložiti aplikacijo, spodaj pritisnite gumb za deljenje&nbsp;<md-icon style="font-size: 1rem;display:contents;" aria-hidden="true">ios_share</md-icon></span>&nbsp;in poiščite gumb  "<md-icon style="font-size: 1rem;display:contents;" aria-hidden="true">add_box</md-icon> Add to home screen".';let t=document.createElement("div");t.setAttribute("slot","actions"),e.parentNode.appendChild(t);let n=addElement("md-text-button",t,null);n.innerHTML="Ok",n.addEventListener("click",function(){hideDialog(e)})}else{await t.prompt();e()}else window.open("/","_blank")})});